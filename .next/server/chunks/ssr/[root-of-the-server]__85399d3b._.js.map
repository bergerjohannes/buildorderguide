{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/components/Button.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  children: React.ReactNode;\n  variant?: \"default\" | \"danger\" | \"secondary\";\n  fullWidth?: boolean;\n}\n\nexport default function Button({\n  children,\n  variant = \"default\",\n  fullWidth = false,\n  className = \"\",\n  ...props\n}: ButtonProps) {\n  const getVariantClasses = () => {\n    switch (variant) {\n      case \"danger\":\n        return \"bg-cancel hover:bg-background text-background hover:text-cancel border border-transparent hover:border-cancel\";\n      case \"secondary\":\n        return \"bg-background hover:bg-foreground text-foreground hover:text-background border border-foreground hover:border-transparent\";\n      case \"default\":\n      default:\n        return \"bg-foreground hover:bg-background text-background hover:text-foreground border border-transparent hover:border-foreground\";\n    }\n  };\n\n  return (\n    <button\n      className={`${getVariantClasses()} ${fullWidth ? \"w-full\" : \"\"} rounded-default font-medium transition-colors duration-200 focus:outline-none cursor-pointer px-4 py-2 text-sm ${className}`}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;AAWe,SAAS,OAAO,EAC7B,QAAQ,EACR,UAAU,SAAS,EACnB,YAAY,KAAK,EACjB,YAAY,EAAE,EACd,GAAG,OACS;IACZ,MAAM,oBAAoB;QACxB,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;YACL;gBACE,OAAO;QACX;IACF;IAEA,qBACE,8OAAC;QACC,WAAW,GAAG,oBAAoB,CAAC,EAAE,YAAY,WAAW,GAAG,gHAAgH,EAAE,WAAW;QAC3L,GAAG,KAAK;kBAER;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/components/Navigation.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport Link from \"next/link\";\nimport Image from \"next/image\";\nimport Button from \"@/components/Button\";\nimport { useAuth } from \"@/contexts/AuthContext\";\n\n// MenuItem component for reusable menu items\ninterface MenuItemProps {\n  href: string;\n  children: React.ReactNode;\n  variant?: \"default\" | \"primary\" | \"mobile\";\n  onClick?: () => void;\n  className?: string;\n}\n\nfunction MenuItem({\n  href,\n  children,\n  variant = \"default\",\n  onClick,\n  className = \"\",\n}: MenuItemProps) {\n  const getVariantClasses = () => {\n    switch (variant) {\n      case \"primary\":\n        return \"bg-foreground hover:bg-foreground text-foreground hover:text-foreground px-4 py-2 rounded-default text-sm font-medium transition-colors duration-200\";\n      case \"mobile\":\n        return \"text-foreground hover:text-foreground text-lg font-medium py-3 border-b border-muted\";\n      case \"default\":\n      default:\n        return \"bg-muted hover:bg-muted text-foreground px-4 py-2 rounded-default text-sm font-medium transition-colors duration-200\";\n    }\n  };\n\n  const combinedClassName = `${getVariantClasses()} ${className}`.trim();\n\n  return (\n    <Link href={href} className={combinedClassName} onClick={onClick}>\n      {children}\n    </Link>\n  );\n}\n\n// Special variant for mobile profile/auth buttons\nfunction MobileAuthMenuItem({\n  href,\n  children,\n  variant = \"default\",\n  onClick,\n  className = \"\",\n}: MenuItemProps) {\n  const getVariantClasses = () => {\n    switch (variant) {\n      case \"primary\":\n        return \"block w-full text-center bg-muted hover:bg-foreground text-foreground hover:text-background px-4 py-3 rounded-default text-lg font-medium transition-colors duration-200\";\n      case \"default\":\n      default:\n        return \"block w-full text-center bg-muted hover:bg-foreground text-foreground hover:text-background px-4 py-3 rounded-default text-lg font-medium transition-colors duration-200\";\n    }\n  };\n\n  const combinedClassName = `${getVariantClasses()} ${className}`.trim();\n\n  return (\n    <Link href={href} className={combinedClassName} onClick={onClick}>\n      {children}\n    </Link>\n  );\n}\n\nexport default function Navigation() {\n  const { currentUser } = useAuth();\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n\n  const toggleMobileMenu = () => {\n    setIsMobileMenuOpen(!isMobileMenuOpen);\n  };\n\n  const closeMobileMenu = () => {\n    setIsMobileMenuOpen(false);\n  };\n\n  return (\n    <>\n      <nav className=\"bg-background shadow-default sticky top-0 z-50\">\n        <div className=\"px-4\">\n          <div className=\"flex justify-between h-16\">\n            {/* Left side - Logo */}\n            <div className=\"flex items-center\">\n              <Link\n                href=\"/\"\n                className=\"flex items-center space-x-2 text-xl font-bold text-foreground\"\n              >\n                <Image\n                  src=\"/images/Other/Logo.png\"\n                  alt=\"Build Order Guide Logo\"\n                  width={32}\n                  height={32}\n                  className=\"flex-shrink-0\"\n                />\n                <span>BUILD ORDER GUIDE</span>\n              </Link>\n            </div>\n\n            {/* Desktop Menu - Right side */}\n            <div className=\"hidden md:flex items-center space-x-3\">\n              <Link href=\"/\">\n                <Button>Builds</Button>\n              </Link>\n              <Link href=\"/uptime\">\n                <Button>Uptime</Button>\n              </Link>\n              <Link href=\"/builder\">\n                <Button>Builder</Button>\n              </Link>\n              <Link href=\"/about\">\n                <Button>About</Button>\n              </Link>\n\n              {/* Auth section */}\n              {currentUser ? (\n                <Link href=\"/profile\">\n                  <Button>Profile</Button>\n                </Link>\n              ) : (\n                <Link href=\"/login\">\n                  <Button>Login</Button>\n                </Link>\n              )}\n            </div>\n\n            {/* Mobile hamburger button */}\n            <div className=\"md:hidden flex items-center\">\n              <Button onClick={toggleMobileMenu} aria-label=\"Toggle menu\">\n                {isMobileMenuOpen ? (\n                  // X icon\n                  <svg\n                    className=\"h-6 w-6\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke=\"currentColor\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M6 18L18 6M6 6l12 12\"\n                    />\n                  </svg>\n                ) : (\n                  // Hamburger icon\n                  <svg\n                    className=\"h-6 w-6\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke=\"currentColor\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M4 6h16M4 12h16M4 18h16\"\n                    />\n                  </svg>\n                )}\n              </Button>\n            </div>\n          </div>\n        </div>\n      </nav>\n\n      {/* Mobile Menu Overlay - Outside of nav to prevent height changes */}\n      {isMobileMenuOpen && (\n        <div className=\"md:hidden fixed top-16 left-0 right-0 bottom-0 z-50 bg-background\">\n          {/* Mobile menu items */}\n          <div className=\"flex flex-col items-center space-y-4 p-6\">\n            <Link href=\"/\" onClick={closeMobileMenu}>\n              <Button>Builds</Button>\n            </Link>\n            <Link href=\"/builder\" onClick={closeMobileMenu}>\n              <Button>Builder</Button>\n            </Link>\n            <Link href=\"/uptime\" onClick={closeMobileMenu}>\n              <Button>Uptime</Button>\n            </Link>\n            <Link href=\"/about\" onClick={closeMobileMenu}>\n              <Button>About</Button>\n            </Link>\n\n            {/* Auth section */}\n            {currentUser ? (\n              <Link href=\"/profile\" onClick={closeMobileMenu}>\n                <Button>Profile</Button>\n              </Link>\n            ) : (\n              <Link href=\"/login\" onClick={closeMobileMenu}>\n                <Button>Login</Button>\n              </Link>\n            )}\n          </div>\n        </div>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 453, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/lib/villagerCalculator.ts"],"sourcesContent":["import { Build } from \"@/types/build\";\nimport { BuildOrderStep } from \"@/types/buildFormat\";\n\nfunction getTotalVillagersFromResources(resources: { food: number; wood: number; gold: number; stone: number; build: number }): number {\n  return resources.food + resources.wood + resources.gold + resources.stone + resources.build;\n}\n\nfunction findLastStepBeforeAgeUp(steps: BuildOrderStep[], targetAge: string): BuildOrderStep | null {\n  let lastStepBeforeAgeUp: BuildOrderStep | null = null;\n\n  for (const step of steps) {\n    if (step.type === \"ageUp\" && step.age === targetAge) {\n      break;\n    }\n    // Keep track of the last step that has villager allocations\n    if (step.resources && getTotalVillagersFromResources(step.resources) > 0) {\n      lastStepBeforeAgeUp = step;\n    }\n  }\n\n  return lastStepBeforeAgeUp;\n}\n\nexport function getFeudalVillagerCount(build: Build): string {\n  if (!build.build || build.build.length === 0) {\n    return \"?\";\n  }\n\n  const lastStep = findLastStepBeforeAgeUp(build.build, \"feudalAge\");\n  if (!lastStep) {\n    return \"?\";\n  }\n\n  const count = getTotalVillagersFromResources(lastStep.resources);\n  return (count + 1).toString(); // +1 for the scout\n}\n\nexport function hasAgeTransition(build: Build, age: string): boolean {\n  if (!build.build) {\n    return false;\n  }\n\n  return build.build.some(step => step.type === \"ageUp\" && step.age === age);\n}\n\nexport function getVillagerDifference(\n  build: Build,\n  currentAge: \"castle\" | \"imperial\"\n): string | null {\n  if (!build.build) {\n    return null;\n  }\n  \n  // Check if the build actually reaches the requested age\n  const targetAge = currentAge === \"castle\" ? \"castleAge\" : \"imperialAge\";\n  if (!hasAgeTransition(build, targetAge)) {\n    return null; // Don't show differences for ages not reached\n  }\n  \n  let currentCount: number | null;\n  let previousCount: number | null;\n  \n  if (currentAge === \"castle\") {\n    // For castle, we need the count before castle age up\n    const lastStepBeforeCastle = findLastStepBeforeAgeUp(build.build || [], \"castleAge\");\n    currentCount = lastStepBeforeCastle ? getTotalVillagersFromResources(lastStepBeforeCastle.resources) : null;\n    \n    // Previous count is before feudal age up (without +1 scout for comparison)\n    const lastStepBeforeFeudal = findLastStepBeforeAgeUp(build.build || [], \"feudalAge\");\n    previousCount = lastStepBeforeFeudal ? getTotalVillagersFromResources(lastStepBeforeFeudal.resources) : null;\n  } else {\n    // Imperial age - only show if we also have castle age\n    if (!hasAgeTransition(build, \"castleAge\")) {\n      return null; // Can't show imperial difference without castle\n    }\n    \n    const lastStepBeforeImperial = findLastStepBeforeAgeUp(build.build || [], \"imperialAge\");\n    currentCount = lastStepBeforeImperial ? getTotalVillagersFromResources(lastStepBeforeImperial.resources) : null;\n    \n    const lastStepBeforeCastle = findLastStepBeforeAgeUp(build.build || [], \"castleAge\");\n    previousCount = lastStepBeforeCastle ? getTotalVillagersFromResources(lastStepBeforeCastle.resources) : null;\n  }\n  \n  if (currentCount !== null && previousCount !== null) {\n    const diff = currentCount - previousCount;\n    if (diff >= 0 && diff <= 5) {\n      return `+${diff}`;\n    }\n    return null; // Don't show badge for large differences\n  }\n  \n  return null;\n}\n\n// Legacy function compatibility - now only works with new format\nexport function calculateVillagerCount(\n  _checkpoints: Build[\"checkpoints\"],\n  _targetType: string,\n  _fallbackType: string\n): number | null {\n  return null; // Legacy format no longer supported\n}"],"names":[],"mappings":";;;;;;AAGA,SAAS,+BAA+B,SAAqF;IAC3H,OAAO,UAAU,IAAI,GAAG,UAAU,IAAI,GAAG,UAAU,IAAI,GAAG,UAAU,KAAK,GAAG,UAAU,KAAK;AAC7F;AAEA,SAAS,wBAAwB,KAAuB,EAAE,SAAiB;IACzE,IAAI,sBAA6C;IAEjD,KAAK,MAAM,QAAQ,MAAO;QACxB,IAAI,KAAK,IAAI,KAAK,WAAW,KAAK,GAAG,KAAK,WAAW;YACnD;QACF;QACA,4DAA4D;QAC5D,IAAI,KAAK,SAAS,IAAI,+BAA+B,KAAK,SAAS,IAAI,GAAG;YACxE,sBAAsB;QACxB;IACF;IAEA,OAAO;AACT;AAEO,SAAS,uBAAuB,KAAY;IACjD,IAAI,CAAC,MAAM,KAAK,IAAI,MAAM,KAAK,CAAC,MAAM,KAAK,GAAG;QAC5C,OAAO;IACT;IAEA,MAAM,WAAW,wBAAwB,MAAM,KAAK,EAAE;IACtD,IAAI,CAAC,UAAU;QACb,OAAO;IACT;IAEA,MAAM,QAAQ,+BAA+B,SAAS,SAAS;IAC/D,OAAO,CAAC,QAAQ,CAAC,EAAE,QAAQ,IAAI,mBAAmB;AACpD;AAEO,SAAS,iBAAiB,KAAY,EAAE,GAAW;IACxD,IAAI,CAAC,MAAM,KAAK,EAAE;QAChB,OAAO;IACT;IAEA,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,CAAA,OAAQ,KAAK,IAAI,KAAK,WAAW,KAAK,GAAG,KAAK;AACxE;AAEO,SAAS,sBACd,KAAY,EACZ,UAAiC;IAEjC,IAAI,CAAC,MAAM,KAAK,EAAE;QAChB,OAAO;IACT;IAEA,wDAAwD;IACxD,MAAM,YAAY,eAAe,WAAW,cAAc;IAC1D,IAAI,CAAC,iBAAiB,OAAO,YAAY;QACvC,OAAO,MAAM,8CAA8C;IAC7D;IAEA,IAAI;IACJ,IAAI;IAEJ,IAAI,eAAe,UAAU;QAC3B,qDAAqD;QACrD,MAAM,uBAAuB,wBAAwB,MAAM,KAAK,IAAI,EAAE,EAAE;QACxE,eAAe,uBAAuB,+BAA+B,qBAAqB,SAAS,IAAI;QAEvG,2EAA2E;QAC3E,MAAM,uBAAuB,wBAAwB,MAAM,KAAK,IAAI,EAAE,EAAE;QACxE,gBAAgB,uBAAuB,+BAA+B,qBAAqB,SAAS,IAAI;IAC1G,OAAO;QACL,sDAAsD;QACtD,IAAI,CAAC,iBAAiB,OAAO,cAAc;YACzC,OAAO,MAAM,gDAAgD;QAC/D;QAEA,MAAM,yBAAyB,wBAAwB,MAAM,KAAK,IAAI,EAAE,EAAE;QAC1E,eAAe,yBAAyB,+BAA+B,uBAAuB,SAAS,IAAI;QAE3G,MAAM,uBAAuB,wBAAwB,MAAM,KAAK,IAAI,EAAE,EAAE;QACxE,gBAAgB,uBAAuB,+BAA+B,qBAAqB,SAAS,IAAI;IAC1G;IAEA,IAAI,iBAAiB,QAAQ,kBAAkB,MAAM;QACnD,MAAM,OAAO,eAAe;QAC5B,IAAI,QAAQ,KAAK,QAAQ,GAAG;YAC1B,OAAO,CAAC,CAAC,EAAE,MAAM;QACnB;QACA,OAAO,MAAM,yCAAyC;IACxD;IAEA,OAAO;AACT;AAGO,SAAS,uBACd,YAAkC,EAClC,WAAmB,EACnB,aAAqB;IAErB,OAAO,MAAM,oCAAoC;AACnD","debugId":null}},
    {"offset": {"line": 536, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/components/VillagerCounts.tsx"],"sourcesContent":["import Image from \"next/image\";\nimport { Build } from \"@/types/build\";\nimport {\n  getFeudalVillagerCount,\n  getVillagerDifference,\n} from \"@/lib/villagerCalculator\";\n\ninterface VillagerCountsProps {\n  build: Build;\n}\n\nfunction VillagerCounts({ build }: VillagerCountsProps) {\n  // Calculate all values upfront\n  const feudalCount = getFeudalVillagerCount(build);\n  \n  const castleDifference = getVillagerDifference(build, \"castle\");\n  const showCastle = castleDifference !== null;\n  \n  const imperialDifference = getVillagerDifference(build, \"imperial\");\n  const showImperial = imperialDifference !== null;\n\n  return (\n    <div className=\"flex items-center flex-wrap gap-2 mb-2\">\n      {/* Feudal Age */}\n      <div className=\"flex items-center space-x-2 bg-muted px-2 py-1 rounded-default\">\n        <Image\n          src=\"/images/Ages/feudal_age_de.png\"\n          alt=\"Feudal Age Villagers\"\n          width={20}\n          height={20}\n        />\n        <span className=\"text-sm font-medium text-foreground\">\n          {feudalCount}\n        </span>\n      </div>\n\n      {/* Castle Age */}\n      {showCastle && (\n        <div className=\"flex items-center space-x-2 bg-muted px-2 py-1 rounded-default\">\n          <Image\n            src=\"/images/Ages/castle_age_de.png\"\n            alt=\"Castle Age Additional Villagers\"\n            width={20}\n            height={20}\n          />\n          <span className=\"text-sm font-medium text-foreground\">\n            {castleDifference}\n          </span>\n        </div>\n      )}\n\n      {/* Imperial Age */}\n      {showImperial && (\n        <div className=\"flex items-center space-x-2 bg-muted px-2 py-1 rounded-default\">\n          <Image\n            src=\"/images/Ages/imperial_age_de.png\"\n            alt=\"Imperial Age Additional Villagers\"\n            width={20}\n            height={20}\n          />\n          <span className=\"text-sm font-medium text-foreground\">\n            {imperialDifference}\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default VillagerCounts;"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AASA,SAAS,eAAe,EAAE,KAAK,EAAuB;IACpD,+BAA+B;IAC/B,MAAM,cAAc,CAAA,GAAA,gIAAA,CAAA,yBAAsB,AAAD,EAAE;IAE3C,MAAM,mBAAmB,CAAA,GAAA,gIAAA,CAAA,wBAAqB,AAAD,EAAE,OAAO;IACtD,MAAM,aAAa,qBAAqB;IAExC,MAAM,qBAAqB,CAAA,GAAA,gIAAA,CAAA,wBAAqB,AAAD,EAAE,OAAO;IACxD,MAAM,eAAe,uBAAuB;IAE5C,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,6HAAA,CAAA,UAAK;wBACJ,KAAI;wBACJ,KAAI;wBACJ,OAAO;wBACP,QAAQ;;;;;;kCAEV,8OAAC;wBAAK,WAAU;kCACb;;;;;;;;;;;;YAKJ,4BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,6HAAA,CAAA,UAAK;wBACJ,KAAI;wBACJ,KAAI;wBACJ,OAAO;wBACP,QAAQ;;;;;;kCAEV,8OAAC;wBAAK,WAAU;kCACb;;;;;;;;;;;;YAMN,8BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,6HAAA,CAAA,UAAK;wBACJ,KAAI;wBACJ,KAAI;wBACJ,OAAO;wBACP,QAAQ;;;;;;kCAEV,8OAAC;wBAAK,WAAU;kCACb;;;;;;;;;;;;;;;;;;AAMb;uCAEe","debugId":null}},
    {"offset": {"line": 648, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/components/Rating.tsx"],"sourcesContent":["import React from \"react\";\n\ninterface RatingProps {\n  rating?: number;\n  size?: \"small\" | \"medium\" | \"large\";\n}\n\nexport default function Rating({ rating, size = \"medium\" }: RatingProps) {\n  const sizeClasses = {\n    small: \"w-5 h-5\",\n    medium: \"w-6 h-6\",\n    large: \"w-7 h-7\",\n  };\n\n  const starSize = sizeClasses[size];\n  const actualRating = rating || 0;\n  const hasNoRating = !rating;\n\n  return (\n    <div className=\"flex items-center\">\n      {[1, 2, 3, 4, 5].map((star) => (\n        <svg\n          key={star}\n          className={`${starSize} ${\n            hasNoRating\n              ? \"text-muted\"\n              : star <= actualRating\n              ? \"text-foreground\"\n              : \"text-muted\"\n          }`}\n          fill=\"currentColor\"\n          viewBox=\"0 0 20 20\"\n        >\n          <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n        </svg>\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAOe,SAAS,OAAO,EAAE,MAAM,EAAE,OAAO,QAAQ,EAAe;IACrE,MAAM,cAAc;QAClB,OAAO;QACP,QAAQ;QACR,OAAO;IACT;IAEA,MAAM,WAAW,WAAW,CAAC,KAAK;IAClC,MAAM,eAAe,UAAU;IAC/B,MAAM,cAAc,CAAC;IAErB,qBACE,8OAAC;QAAI,WAAU;kBACZ;YAAC;YAAG;YAAG;YAAG;YAAG;SAAE,CAAC,GAAG,CAAC,CAAC,qBACpB,8OAAC;gBAEC,WAAW,GAAG,SAAS,CAAC,EACtB,cACI,eACA,QAAQ,eACR,oBACA,cACJ;gBACF,MAAK;gBACL,SAAQ;0BAER,cAAA,8OAAC;oBAAK,GAAE;;;;;;eAXH;;;;;;;;;;AAgBf","debugId":null}},
    {"offset": {"line": 696, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/components/Input.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\n\ninterface InputProps {\n  type?: 'text' | 'textarea' | 'number';\n  value: string | number;\n  onChange: (value: string | number) => void;\n  onBlur?: () => void;\n  placeholder?: string;\n  label?: string;\n  rows?: number;\n  className?: string;\n  min?: number;\n}\n\nexport default function Input({\n  type = 'text',\n  value,\n  onChange,\n  onBlur,\n  placeholder,\n  label,\n  rows = 3,\n  className = '',\n  min,\n}: InputProps) {\n  const baseClasses = \"bg-background rounded-default shadow-default focus:outline-none focus:ring-2 focus:ring-foreground text-foreground\";\n  \n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    if (type === 'number') {\n      onChange(parseInt(e.target.value) || 0);\n    } else {\n      onChange(e.target.value);\n    }\n  };\n\n  const getInputClasses = () => {\n    if (type === 'number') {\n      return `w-16 px-2 py-1 text-sm ${baseClasses} ${className}`;\n    }\n    return `w-full px-3 py-2 md:py-3 ${baseClasses} ${className}`;\n  };\n\n  return (\n    <div>\n      {label && (\n        <label className=\"block text-sm font-medium text-foreground mb-1\">\n          {label}\n        </label>\n      )}\n      {type === 'textarea' ? (\n        <textarea\n          value={value as string}\n          onChange={handleChange}\n          onBlur={onBlur}\n          placeholder={placeholder}\n          rows={rows}\n          className={`${getInputClasses()} resize-none`}\n        />\n      ) : (\n        <input\n          type={type}\n          value={value}\n          onChange={handleChange}\n          onBlur={onBlur}\n          placeholder={placeholder}\n          min={min}\n          className={getInputClasses()}\n        />\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAAA;;AAgBe,SAAS,MAAM,EAC5B,OAAO,MAAM,EACb,KAAK,EACL,QAAQ,EACR,MAAM,EACN,WAAW,EACX,KAAK,EACL,OAAO,CAAC,EACR,YAAY,EAAE,EACd,GAAG,EACQ;IACX,MAAM,cAAc;IAEpB,MAAM,eAAe,CAAC;QACpB,IAAI,SAAS,UAAU;YACrB,SAAS,SAAS,EAAE,MAAM,CAAC,KAAK,KAAK;QACvC,OAAO;YACL,SAAS,EAAE,MAAM,CAAC,KAAK;QACzB;IACF;IAEA,MAAM,kBAAkB;QACtB,IAAI,SAAS,UAAU;YACrB,OAAO,CAAC,uBAAuB,EAAE,YAAY,CAAC,EAAE,WAAW;QAC7D;QACA,OAAO,CAAC,yBAAyB,EAAE,YAAY,CAAC,EAAE,WAAW;IAC/D;IAEA,qBACE,8OAAC;;YACE,uBACC,8OAAC;gBAAM,WAAU;0BACd;;;;;;YAGJ,SAAS,2BACR,8OAAC;gBACC,OAAO;gBACP,UAAU;gBACV,QAAQ;gBACR,aAAa;gBACb,MAAM;gBACN,WAAW,GAAG,kBAAkB,YAAY,CAAC;;;;;qCAG/C,8OAAC;gBACC,MAAM;gBACN,OAAO;gBACP,UAAU;gBACV,QAAQ;gBACR,aAAa;gBACb,KAAK;gBACL,WAAW;;;;;;;;;;;;AAKrB","debugId":null}},
    {"offset": {"line": 762, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/components/Dropdown.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport Image from \"next/image\";\n\ninterface DropdownOption {\n  value: string;\n  label?: string;\n  icon?: string;\n}\n\ninterface DropdownProps {\n  value: string | undefined;\n  onChange: (value: string) => void;\n  options: DropdownOption[];\n  label?: string;\n  placeholder?: string;\n  className?: string;\n}\n\nexport default function Dropdown({\n  value,\n  onChange,\n  options,\n  label,\n  placeholder = \"Select option\",\n  className = '',\n}: DropdownProps) {\n  const [isOpen, setIsOpen] = useState(false);\n\n  const selectedOption = options.find(option => option.value === value);\n\n  const handleSelect = (optionValue: string) => {\n    onChange(optionValue);\n    setIsOpen(false);\n  };\n\n  return (\n    <div className={`relative ${className}`}>\n      {label && (\n        <label className=\"block text-sm font-medium text-foreground mb-1 px-3\">\n          {label}\n        </label>\n      )}\n      \n      {/* Dropdown Button */}\n      <div\n        className=\"flex items-center w-full px-3 py-2 md:py-3 bg-background rounded-default shadow-default hover:shadow-hover cursor-pointer transition-all duration-300\"\n        onClick={() => setIsOpen(!isOpen)}\n      >\n        {selectedOption?.icon && (\n          <div className=\"w-6 h-6 rounded-full bg-muted flex items-center justify-center mr-3\">\n            <Image\n              src={selectedOption.icon}\n              alt={selectedOption.label || selectedOption.value}\n              width={16}\n              height={16}\n              className=\"w-4 h-4\"\n              onError={(e) => {\n                e.currentTarget.src = \"/images/Civs/generic.png\";\n              }}\n            />\n          </div>\n        )}\n        \n        <span className=\"flex-1 text-foreground font-medium\">\n          {selectedOption ? (selectedOption.label || selectedOption.value) : placeholder}\n        </span>\n        \n        <svg\n          className={`w-5 h-5 text-foreground transition-transform ${\n            isOpen ? \"rotate-180\" : \"\"\n          }`}\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M19 9l-7 7-7-7\"\n          />\n        </svg>\n      </div>\n      \n      {/* Dropdown Menu */}\n      {isOpen && (\n        <div className=\"absolute top-full left-0 right-0 mt-2 bg-background rounded-default shadow-hover z-50 max-h-64 overflow-y-auto border border-muted\">\n          {options.map((option) => (\n            <div\n              key={option.value}\n              onClick={() => handleSelect(option.value)}\n              className=\"flex items-center p-3 hover:bg-muted cursor-pointer\"\n            >\n              {option.icon && (\n                <div className=\"w-6 h-6 rounded-full bg-muted flex items-center justify-center mr-3\">\n                  <Image\n                    src={option.icon}\n                    alt={option.label || option.value}\n                    width={16}\n                    height={16}\n                    className=\"w-4 h-4\"\n                    onError={(e) => {\n                      e.currentTarget.src = \"/images/Civs/generic.png\";\n                    }}\n                  />\n                </div>\n              )}\n              <span className=\"text-foreground\">{option.label || option.value}</span>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Click Outside to Close */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 z-40\"\n          onClick={() => setIsOpen(false)}\n        />\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAoBe,SAAS,SAAS,EAC/B,KAAK,EACL,QAAQ,EACR,OAAO,EACP,KAAK,EACL,cAAc,eAAe,EAC7B,YAAY,EAAE,EACA;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAErC,MAAM,iBAAiB,QAAQ,IAAI,CAAC,CAAA,SAAU,OAAO,KAAK,KAAK;IAE/D,MAAM,eAAe,CAAC;QACpB,SAAS;QACT,UAAU;IACZ;IAEA,qBACE,8OAAC;QAAI,WAAW,CAAC,SAAS,EAAE,WAAW;;YACpC,uBACC,8OAAC;gBAAM,WAAU;0BACd;;;;;;0BAKL,8OAAC;gBACC,WAAU;gBACV,SAAS,IAAM,UAAU,CAAC;;oBAEzB,gBAAgB,sBACf,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,6HAAA,CAAA,UAAK;4BACJ,KAAK,eAAe,IAAI;4BACxB,KAAK,eAAe,KAAK,IAAI,eAAe,KAAK;4BACjD,OAAO;4BACP,QAAQ;4BACR,WAAU;4BACV,SAAS,CAAC;gCACR,EAAE,aAAa,CAAC,GAAG,GAAG;4BACxB;;;;;;;;;;;kCAKN,8OAAC;wBAAK,WAAU;kCACb,iBAAkB,eAAe,KAAK,IAAI,eAAe,KAAK,GAAI;;;;;;kCAGrE,8OAAC;wBACC,WAAW,CAAC,6CAA6C,EACvD,SAAS,eAAe,IACxB;wBACF,MAAK;wBACL,QAAO;wBACP,SAAQ;kCAER,cAAA,8OAAC;4BACC,eAAc;4BACd,gBAAe;4BACf,aAAa;4BACb,GAAE;;;;;;;;;;;;;;;;;YAMP,wBACC,8OAAC;gBAAI,WAAU;0BACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;wBAEC,SAAS,IAAM,aAAa,OAAO,KAAK;wBACxC,WAAU;;4BAET,OAAO,IAAI,kBACV,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,6HAAA,CAAA,UAAK;oCACJ,KAAK,OAAO,IAAI;oCAChB,KAAK,OAAO,KAAK,IAAI,OAAO,KAAK;oCACjC,OAAO;oCACP,QAAQ;oCACR,WAAU;oCACV,SAAS,CAAC;wCACR,EAAE,aAAa,CAAC,GAAG,GAAG;oCACxB;;;;;;;;;;;0CAIN,8OAAC;gCAAK,WAAU;0CAAmB,OAAO,KAAK,IAAI,OAAO,KAAK;;;;;;;uBAlB1D,OAAO,KAAK;;;;;;;;;;YAyBxB,wBACC,8OAAC;gBACC,WAAU;gBACV,SAAS,IAAM,UAAU;;;;;;;;;;;;AAKnC","debugId":null}},
    {"offset": {"line": 914, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/lib/imageUtils.ts"],"sourcesContent":["export function getCivImagePath(civName: string): string {\n  return `/images/Civs/${civName.toLowerCase()}.png`;\n}\n\nexport function getDifficultyImagePath(difficulty: string | number): string {\n  const difficultyMap: { [key: string]: string } = {\n    // Legacy string format\n    Beginner: \"/images/Medals/Bronze.png\",\n    Intermediate: \"/images/Medals/Silver.png\",\n    Advanced: \"/images/Medals/Gold.png\",\n    // New numbered format\n    \"1\": \"/images/Medals/Bronze.png\",\n    \"2\": \"/images/Medals/Silver.png\", \n    \"3\": \"/images/Medals/Gold.png\",\n  };\n  return difficultyMap[difficulty.toString()] || \"/images/Medals/Bronze.png\";\n}\n\nexport function getDifficultyLabel(difficulty: string | number): string {\n  const difficultyLabelMap: { [key: string]: string } = {\n    // Legacy string format\n    Beginner: \"Beginner\",\n    Intermediate: \"Intermediate\",\n    Advanced: \"Advanced\",\n    // New numbered format\n    \"1\": \"Beginner\",\n    \"2\": \"Intermediate\",\n    \"3\": \"Advanced\",\n  };\n  return difficultyLabelMap[difficulty.toString()] || \"Beginner\";\n}\n\nexport function getAgeImagePath(age: string): string {\n  const ageMap: { [key: string]: string } = {\n    dark_age: \"/images/Ages/dark_age_de.png\",\n    feudal_age: \"/images/Ages/feudal_age_de.png\",\n    castle_age: \"/images/Ages/castle_age_de.png\",\n    imperial_age: \"/images/Ages/imperial_age_de.png\",\n  };\n  return ageMap[age] || \"/images/Ages/dark_age_de.png\";\n}\n\nexport function getResourceImagePath(resource: string): string {\n  const resourceMap: { [key: string]: string } = {\n    food: \"/images/Res/Aoe2de_food.png\",\n    wood: \"/images/Res/Aoe2de_wood.png\",\n    gold: \"/images/Res/Aoe2de_gold.png\",\n    stone: \"/images/Res/Aoe2de_stone.png\",\n    builders: \"/images/Res/Aoe2de_builder.png\",\n    build: \"/images/Res/Aoe2de_builder.png\", // Map \"build\" to builder icon\n    fishingShips: \"/images/Res/Aoe2de_ship.png\",\n  };\n  return resourceMap[resource] || \"\";\n}"],"names":[],"mappings":";;;;;;;AAAO,SAAS,gBAAgB,OAAe;IAC7C,OAAO,CAAC,aAAa,EAAE,QAAQ,WAAW,GAAG,IAAI,CAAC;AACpD;AAEO,SAAS,uBAAuB,UAA2B;IAChE,MAAM,gBAA2C;QAC/C,uBAAuB;QACvB,UAAU;QACV,cAAc;QACd,UAAU;QACV,sBAAsB;QACtB,KAAK;QACL,KAAK;QACL,KAAK;IACP;IACA,OAAO,aAAa,CAAC,WAAW,QAAQ,GAAG,IAAI;AACjD;AAEO,SAAS,mBAAmB,UAA2B;IAC5D,MAAM,qBAAgD;QACpD,uBAAuB;QACvB,UAAU;QACV,cAAc;QACd,UAAU;QACV,sBAAsB;QACtB,KAAK;QACL,KAAK;QACL,KAAK;IACP;IACA,OAAO,kBAAkB,CAAC,WAAW,QAAQ,GAAG,IAAI;AACtD;AAEO,SAAS,gBAAgB,GAAW;IACzC,MAAM,SAAoC;QACxC,UAAU;QACV,YAAY;QACZ,YAAY;QACZ,cAAc;IAChB;IACA,OAAO,MAAM,CAAC,IAAI,IAAI;AACxB;AAEO,SAAS,qBAAqB,QAAgB;IACnD,MAAM,cAAyC;QAC7C,MAAM;QACN,MAAM;QACN,MAAM;QACN,OAAO;QACP,UAAU;QACV,OAAO;QACP,cAAc;IAChB;IACA,OAAO,WAAW,CAAC,SAAS,IAAI;AAClC","debugId":null}},
    {"offset": {"line": 975, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/components/CivIcon.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport Image from \"next/image\";\nimport { getCivImagePath } from \"@/lib/imageUtils\";\n\ninterface CivIconProps {\n  civilization: string;\n  size?: \"sm\" | \"md\" | \"lg\";\n  showName?: boolean;\n}\n\nexport default function CivIcon({\n  civilization,\n  size = \"md\",\n  showName = false,\n}: CivIconProps) {\n  const iconClasses = size === \"sm\" ? \"w-4 h-4\" : size === \"lg\" ? \"w-8 h-8\" : \"w-6 h-6\";\n  const textClasses = size === \"sm\" ? \"text-xs\" : size === \"lg\" ? \"text-base\" : \"text-sm\";\n  const imageSize = size === \"sm\" ? 16 : size === \"lg\" ? 32 : 24;\n  \n  const civImagePath = getCivImagePath(\n    civilization === \"Generic\" ? \"generic\" : civilization\n  );\n\n  if (showName) {\n    return (\n      <div className=\"flex items-center space-x-2\">\n        <div className=\"rounded-full bg-muted flex items-center justify-center p-1\">\n          <Image\n            src={civImagePath}\n            alt={civilization}\n            width={imageSize}\n            height={imageSize}\n            className={iconClasses}\n            onError={(e) => {\n              e.currentTarget.src = \"/images/Civs/generic.png\";\n            }}\n          />\n        </div>\n        <span className={`font-medium text-foreground ${textClasses}`}>\n          {civilization}\n        </span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"rounded-full bg-muted flex items-center justify-center p-1\">\n      <Image\n        src={civImagePath}\n        alt={civilization}\n        width={imageSize}\n        height={imageSize}\n        className={iconClasses}\n        onError={(e) => {\n          e.currentTarget.src = \"/images/Civs/generic.png\";\n        }}\n      />\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAYe,SAAS,QAAQ,EAC9B,YAAY,EACZ,OAAO,IAAI,EACX,WAAW,KAAK,EACH;IACb,MAAM,cAAc,SAAS,OAAO,YAAY,SAAS,OAAO,YAAY;IAC5E,MAAM,cAAc,SAAS,OAAO,YAAY,SAAS,OAAO,cAAc;IAC9E,MAAM,YAAY,SAAS,OAAO,KAAK,SAAS,OAAO,KAAK;IAE5D,MAAM,eAAe,CAAA,GAAA,wHAAA,CAAA,kBAAe,AAAD,EACjC,iBAAiB,YAAY,YAAY;IAG3C,IAAI,UAAU;QACZ,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,6HAAA,CAAA,UAAK;wBACJ,KAAK;wBACL,KAAK;wBACL,OAAO;wBACP,QAAQ;wBACR,WAAW;wBACX,SAAS,CAAC;4BACR,EAAE,aAAa,CAAC,GAAG,GAAG;wBACxB;;;;;;;;;;;8BAGJ,8OAAC;oBAAK,WAAW,CAAC,4BAA4B,EAAE,aAAa;8BAC1D;;;;;;;;;;;;IAIT;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,6HAAA,CAAA,UAAK;YACJ,KAAK;YACL,KAAK;YACL,OAAO;YACP,QAAQ;YACR,WAAW;YACX,SAAS,CAAC;gBACR,EAAE,aAAa,CAAC,GAAG,GAAG;YACxB;;;;;;;;;;;AAIR","debugId":null}},
    {"offset": {"line": 1056, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/components/DifficultyBadge.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport Image from \"next/image\";\nimport { getDifficultyImagePath, getDifficultyLabel } from \"@/lib/imageUtils\";\n\ninterface DifficultyBadgeProps {\n  difficulty: string | number | undefined;\n}\n\nexport default function DifficultyBadge({\n  difficulty,\n}: DifficultyBadgeProps) {\n  if (!difficulty && difficulty !== 0) {\n    return null;\n  }\n\n  const difficultyLabel = getDifficultyLabel(difficulty);\n\n  return (\n    <div className=\"flex items-center space-x-2 bg-muted rounded-default px-2 py-1\">\n      <Image\n        src={getDifficultyImagePath(difficulty)}\n        alt={`${difficultyLabel} difficulty`}\n        width={20}\n        height={20}\n        className=\"flex-shrink-0\"\n      />\n      <span className=\"text-sm font-medium text-foreground\">\n        {difficultyLabel}\n      </span>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAGA;AACA;AAJA;;;;AAUe,SAAS,gBAAgB,EACtC,UAAU,EACW;IACrB,IAAI,CAAC,cAAc,eAAe,GAAG;QACnC,OAAO;IACT;IAEA,MAAM,kBAAkB,CAAA,GAAA,wHAAA,CAAA,qBAAkB,AAAD,EAAE;IAE3C,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,6HAAA,CAAA,UAAK;gBACJ,KAAK,CAAA,GAAA,wHAAA,CAAA,yBAAsB,AAAD,EAAE;gBAC5B,KAAK,GAAG,gBAAgB,WAAW,CAAC;gBACpC,OAAO;gBACP,QAAQ;gBACR,WAAU;;;;;;0BAEZ,8OAAC;gBAAK,WAAU;0BACb;;;;;;;;;;;;AAIT","debugId":null}},
    {"offset": {"line": 1104, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/lib/attributes.ts"],"sourcesContent":["export const AVAILABLE_ATTRIBUTES = [\n  \"drush\",\n  \"fastFeudal\",\n  \"fastCastle\",\n  \"fastImperial\",\n  \"water\",\n  \"meme\",\n  \"arena\",\n];\n\n// Translation mapping for camelCase attribute values\nconst ATTRIBUTE_VALUE_MAP: Record<string, string> = {\n  drush: \"drush\",\n  fastfeudal: \"fastFeudal\",\n  fastcastle: \"fastCastle\",\n  fastimperial: \"fastImperial\",\n  water: \"water\",\n  waterhybrid: \"water\",\n  meme: \"meme\",\n  arena: \"arena\",\n};\n\nfunction toReadableLabel(attribute: string): string {\n  return attribute\n    .replace(/([a-z])([A-Z])/g, \"$1 $2\")\n    .replace(/(^|\\s)([a-z])/g, (match) => match.toUpperCase());\n}\n\nfunction normalizeAttributeValue(attribute: string): string | null {\n  if (!attribute) return null;\n  if (AVAILABLE_ATTRIBUTES.includes(attribute)) {\n    return attribute;\n  }\n  const sanitized = attribute.toLowerCase().replace(/[^a-z]/g, \"\");\n  return ATTRIBUTE_VALUE_MAP[sanitized] || null;\n}\n\n/**\n * Translates an attribute value to its readable display text.\n * Handles both camelCase values and current display-ready labels.\n */\nexport function translateAttribute(attribute: string): string {\n  const normalized = normalizeAttributeValue(attribute);\n  if (normalized) {\n    return toReadableLabel(normalized);\n  }\n  return toReadableLabel(attribute);\n}\n\n/**\n * Translates an array of attribute values to readable display text.\n * Filters out unsupported attributes.\n */\nexport function translateAttributes(attributes: string[]): string[] {\n  if (!attributes || !Array.isArray(attributes)) return [];\n  \n  return attributes\n    .filter(attr => attr && typeof attr === 'string')\n    .map(translateAttribute)\n    .filter(translatedAttr => translatedAttr !== '');\n}\n\nexport function getAttributeOptions() {\n  return AVAILABLE_ATTRIBUTES.map((attr) => ({\n    value: attr,\n    label: toReadableLabel(attr),\n  }));\n}\n\nexport function getAttributeDropdownOptions() {\n  return [\n    { value: \"All\", label: \"All\" },\n    ...AVAILABLE_ATTRIBUTES.map((attr) => ({\n      value: attr,\n      label: toReadableLabel(attr),\n    })),\n  ];\n}\n"],"names":[],"mappings":";;;;;;;AAAO,MAAM,uBAAuB;IAClC;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,qDAAqD;AACrD,MAAM,sBAA8C;IAClD,OAAO;IACP,YAAY;IACZ,YAAY;IACZ,cAAc;IACd,OAAO;IACP,aAAa;IACb,MAAM;IACN,OAAO;AACT;AAEA,SAAS,gBAAgB,SAAiB;IACxC,OAAO,UACJ,OAAO,CAAC,mBAAmB,SAC3B,OAAO,CAAC,kBAAkB,CAAC,QAAU,MAAM,WAAW;AAC3D;AAEA,SAAS,wBAAwB,SAAiB;IAChD,IAAI,CAAC,WAAW,OAAO;IACvB,IAAI,qBAAqB,QAAQ,CAAC,YAAY;QAC5C,OAAO;IACT;IACA,MAAM,YAAY,UAAU,WAAW,GAAG,OAAO,CAAC,WAAW;IAC7D,OAAO,mBAAmB,CAAC,UAAU,IAAI;AAC3C;AAMO,SAAS,mBAAmB,SAAiB;IAClD,MAAM,aAAa,wBAAwB;IAC3C,IAAI,YAAY;QACd,OAAO,gBAAgB;IACzB;IACA,OAAO,gBAAgB;AACzB;AAMO,SAAS,oBAAoB,UAAoB;IACtD,IAAI,CAAC,cAAc,CAAC,MAAM,OAAO,CAAC,aAAa,OAAO,EAAE;IAExD,OAAO,WACJ,MAAM,CAAC,CAAA,OAAQ,QAAQ,OAAO,SAAS,UACvC,GAAG,CAAC,oBACJ,MAAM,CAAC,CAAA,iBAAkB,mBAAmB;AACjD;AAEO,SAAS;IACd,OAAO,qBAAqB,GAAG,CAAC,CAAC,OAAS,CAAC;YACzC,OAAO;YACP,OAAO,gBAAgB;QACzB,CAAC;AACH;AAEO,SAAS;IACd,OAAO;QACL;YAAE,OAAO;YAAO,OAAO;QAAM;WAC1B,qBAAqB,GAAG,CAAC,CAAC,OAAS,CAAC;gBACrC,OAAO;gBACP,OAAO,gBAAgB;YACzB,CAAC;KACF;AACH","debugId":null}},
    {"offset": {"line": 1175, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/components/AttributeBadges.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { translateAttributes } from \"@/lib/attributes\";\n\ninterface AttributeBadgesProps {\n  attributes: string[];\n  maxVisible?: number;\n}\n\nexport default function AttributeBadges({\n  attributes,\n  maxVisible,\n}: AttributeBadgesProps) {\n  if (!attributes || attributes.length === 0) {\n    return null;\n  }\n\n  // Translate attributes from camelCase values to readable text\n  const translatedAttributes = translateAttributes(attributes);\n  \n  const visibleAttributes = maxVisible\n    ? translatedAttributes.slice(0, maxVisible)\n    : translatedAttributes;\n  const remainingCount =\n    maxVisible && translatedAttributes.length > maxVisible\n      ? translatedAttributes.length - maxVisible\n      : 0;\n\n  return (\n    <div className=\"flex items-center flex-wrap gap-2\">\n      {visibleAttributes.map((attr, index) => (\n        <span\n          key={index}\n          className=\"bg-muted text-foreground rounded-default font-medium text-sm px-2 py-1\"\n        >\n          {attr}\n        </span>\n      ))}\n      {remainingCount > 0 && (\n        <span className=\"bg-muted text-foreground rounded-default font-medium text-sm px-2 py-1\">\n          +{remainingCount}\n        </span>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AAHA;;;AAUe,SAAS,gBAAgB,EACtC,UAAU,EACV,UAAU,EACW;IACrB,IAAI,CAAC,cAAc,WAAW,MAAM,KAAK,GAAG;QAC1C,OAAO;IACT;IAEA,8DAA8D;IAC9D,MAAM,uBAAuB,CAAA,GAAA,wHAAA,CAAA,sBAAmB,AAAD,EAAE;IAEjD,MAAM,oBAAoB,aACtB,qBAAqB,KAAK,CAAC,GAAG,cAC9B;IACJ,MAAM,iBACJ,cAAc,qBAAqB,MAAM,GAAG,aACxC,qBAAqB,MAAM,GAAG,aAC9B;IAEN,qBACE,8OAAC;QAAI,WAAU;;YACZ,kBAAkB,GAAG,CAAC,CAAC,MAAM,sBAC5B,8OAAC;oBAEC,WAAU;8BAET;mBAHI;;;;;YAMR,iBAAiB,mBAChB,8OAAC;gBAAK,WAAU;;oBAAyE;oBACrF;;;;;;;;;;;;;AAKZ","debugId":null}},
    {"offset": {"line": 1224, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/components/FavoriteButton.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\n\ninterface FavoriteButtonProps {\n  isFavorited: boolean;\n  onToggle: (e?: React.MouseEvent) => void;\n}\n\nexport default function FavoriteButton({\n  isFavorited,\n  onToggle,\n}: FavoriteButtonProps) {\n  return (\n    <button \n      className={`transition-colors duration-200 ${isFavorited ? \"text-cancel\" : \"text-muted hover:text-cancel\"}`}\n      onClick={(e) => {\n        e.stopPropagation();\n        onToggle(e);\n      }}\n      aria-label={isFavorited ? \"Remove from favorites\" : \"Add to favorites\"}\n    >\n      <svg\n        className=\"w-6 h-6\"\n        fill={isFavorited ? \"currentColor\" : \"none\"}\n        stroke=\"currentColor\"\n        viewBox=\"0 0 24 24\"\n      >\n        <path\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n          strokeWidth={2}\n          d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\n        />\n      </svg>\n    </button>\n  );\n}"],"names":[],"mappings":";;;;AAAA;;AASe,SAAS,eAAe,EACrC,WAAW,EACX,QAAQ,EACY;IACpB,qBACE,8OAAC;QACC,WAAW,CAAC,+BAA+B,EAAE,cAAc,gBAAgB,gCAAgC;QAC3G,SAAS,CAAC;YACR,EAAE,eAAe;YACjB,SAAS;QACX;QACA,cAAY,cAAc,0BAA0B;kBAEpD,cAAA,8OAAC;YACC,WAAU;YACV,MAAM,cAAc,iBAAiB;YACrC,QAAO;YACP,SAAQ;sBAER,cAAA,8OAAC;gBACC,eAAc;gBACd,gBAAe;gBACf,aAAa;gBACb,GAAE;;;;;;;;;;;;;;;;AAKZ","debugId":null}},
    {"offset": {"line": 1268, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/components/BuildImage.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport Image from \"next/image\";\n\ninterface BuildImageProps {\n  imageURL?: string;\n  buildTitle: string;\n  placeholder?: string;\n}\n\nexport default function BuildImage({\n  imageURL,\n  buildTitle,\n  placeholder = \"/images/Other/BuildImagePlaceholder.png\"\n}: BuildImageProps) {\n  const [imageUrl, setImageUrl] = useState<string>(imageURL || placeholder);\n\n  return (\n    <Image\n      src={imageUrl}\n      alt={buildTitle}\n      width={96}\n      height={96}\n      className=\"w-32 h-32 object-cover rounded-bl-default\"\n      onError={() => {\n        setImageUrl(placeholder);\n      }}\n    />\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAWe,SAAS,WAAW,EACjC,QAAQ,EACR,UAAU,EACV,cAAc,yCAAyC,EACvC;IAChB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU,YAAY;IAE7D,qBACE,8OAAC,6HAAA,CAAA,UAAK;QACJ,KAAK;QACL,KAAK;QACL,OAAO;QACP,QAAQ;QACR,WAAU;QACV,SAAS;YACP,YAAY;QACd;;;;;;AAGN","debugId":null}},
    {"offset": {"line": 1299, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/components/LoadingSpinner.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\n\ninterface LoadingSpinnerProps {\n  label?: string;\n}\n\nexport default function LoadingSpinner({\n  label,\n}: LoadingSpinnerProps) {\n  return (\n    <div className=\"flex flex-col items-center\">\n      <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-foreground\" />\n      {label && (\n        <p className=\"text-foreground mt-2\">{label}</p>\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAAA;;AAQe,SAAS,eAAe,EACrC,KAAK,EACe;IACpB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;;;;;YACd,uBACC,8OAAC;gBAAE,WAAU;0BAAwB;;;;;;;;;;;;AAI7C","debugId":null}},
    {"offset": {"line": 1335, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/components/EmptyState.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport Image from \"next/image\";\n\ninterface EmptyStateProps {\n  text: string;\n}\n\nexport default function EmptyState({ text }: EmptyStateProps) {\n  return (\n    <div\n      className={`flex flex-col items-center justify-center py-12 px-4 text-center`}\n    >\n      <div className=\"mb-6\">\n        <Image\n          src=\"/images/Other/BuildImagePlaceholder.png\"\n          alt=\"Empty state placeholder\"\n          width={120}\n          height={120}\n          className=\"w-30 h-30 object-contain opacity-60\"\n        />\n      </div>\n      <p className=\"text-foreground text-lg font-medium max-w-md\">{text}</p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AAHA;;;AASe,SAAS,WAAW,EAAE,IAAI,EAAmB;IAC1D,qBACE,8OAAC;QACC,WAAW,CAAC,gEAAgE,CAAC;;0BAE7E,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,6HAAA,CAAA,UAAK;oBACJ,KAAI;oBACJ,KAAI;oBACJ,OAAO;oBACP,QAAQ;oBACR,WAAU;;;;;;;;;;;0BAGd,8OAAC;gBAAE,WAAU;0BAAgD;;;;;;;;;;;;AAGnE","debugId":null}},
    {"offset": {"line": 1384, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/components/Header.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\n\ninterface HeaderProps {\n  text: string;\n  subtitle?: string;\n}\n\nexport default function Header({ text, subtitle }: HeaderProps) {\n  return (\n    <div className=\"text-center mb-8\">\n      <h1 className=\"text-2xl sm:text-3xl lg:text-4xl font-bold text-foreground mb-2 text-pretty\">\n        {text}\n      </h1>\n      {subtitle && (\n        <p className=\"text-foreground text-sm sm:text-base\">\n          {subtitle}\n        </p>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;AASe,SAAS,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAe;IAC5D,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BACX;;;;;;YAEF,0BACC,8OAAC;gBAAE,WAAU;0BACV;;;;;;;;;;;;AAKX","debugId":null}},
    {"offset": {"line": 1421, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/components/AuthPromptModal.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport Button from \"./Button\";\n\ninterface AuthPromptModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onLogin: () => void;\n    onRegister: () => void;\n}\n\nexport default function AuthPromptModal({\n    isOpen,\n    onClose,\n    onLogin,\n    onRegister,\n}: AuthPromptModalProps) {\n    if (!isOpen) return null;\n\n    return (\n        <>\n            {/* Backdrop */}\n            <div className=\"fixed inset-0 bg-muted/80 z-50 backdrop-blur-sm cursor-pointer\" onClick={onClose} />\n\n            {/* Dialog */}\n            <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none\">\n                <div className=\"bg-background rounded-default shadow-hover max-w-md w-full p-6 pointer-events-auto border border-foreground/10\">\n                    <h3 className=\"text-xl font-bold text-foreground mb-2 text-center\">\n                        Account Required\n                    </h3>\n\n                    <p className=\"text-foreground/80 mb-8 text-center text-pretty\">\n                        Please log in or create an account to rate builds, save favorites, and keep them on your profile.\n                    </p>\n\n                    <div className=\"flex flex-col gap-3\">\n                        <Button onClick={onLogin} fullWidth>\n                            Log In\n                        </Button>\n                        <Button onClick={onRegister} variant=\"secondary\" fullWidth>\n                            Create Account\n                        </Button>\n                        <button\n                            onClick={onClose}\n                            className=\"mt-2 text-sm text-foreground/60 hover:text-foreground transition-colors\"\n                        >\n                            Cancel\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n}\n"],"names":[],"mappings":";;;;AAGA;AAHA;;;AAYe,SAAS,gBAAgB,EACpC,MAAM,EACN,OAAO,EACP,OAAO,EACP,UAAU,EACS;IACnB,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACI;;0BAEI,8OAAC;gBAAI,WAAU;gBAAiE,SAAS;;;;;;0BAGzF,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAG,WAAU;sCAAqD;;;;;;sCAInE,8OAAC;4BAAE,WAAU;sCAAkD;;;;;;sCAI/D,8OAAC;4BAAI,WAAU;;8CACX,8OAAC,4HAAA,CAAA,UAAM;oCAAC,SAAS;oCAAS,SAAS;8CAAC;;;;;;8CAGpC,8OAAC,4HAAA,CAAA,UAAM;oCAAC,SAAS;oCAAY,SAAQ;oCAAY,SAAS;8CAAC;;;;;;8CAG3D,8OAAC;oCACG,SAAS;oCACT,WAAU;8CACb;;;;;;;;;;;;;;;;;;;;;;;;;AAQzB","debugId":null}},
    {"offset": {"line": 1517, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/lib/taskUtils.ts"],"sourcesContent":["import { Resources } from \"@/types/buildFormat\";\n\nconst FOOD_TASKS = new Set([\n  \"sheep\",\n  \"boar\",\n  \"deer\",\n  \"chicken\",\n  \"berries\",\n  \"farms\",\n  \"shorefish\",\n  \"foodundertc\",\n]);\n\nconst WOOD_TASKS = new Set([\"wood\", \"stragglertree\", \"lumber\", \"lumbercamp\"]);\nconst GOLD_TASKS = new Set([\"gold\", \"fox\", \"mine\", \"miningcamp\"]);\nconst STONE_TASKS = new Set([\"stone\"]);\n\nexport const RESOURCE_KEYS: (keyof Resources)[] = [\n  \"food\",\n  \"wood\",\n  \"gold\",\n  \"stone\",\n  \"build\",\n];\n\nexport function createEmptyResourceSnapshot(): Resources {\n  return {\n    food: 0,\n    wood: 0,\n    gold: 0,\n    stone: 0,\n    build: 0,\n  };\n}\n\nexport function normalizeTaskIdentifier(task?: string): string {\n  return (task || \"\").toLowerCase().replace(/[^a-z]/g, \"\");\n}\n\nexport function taskToResource(task?: string): keyof Resources {\n  const normalized = normalizeTaskIdentifier(task);\n\n  if (FOOD_TASKS.has(normalized)) {\n    return \"food\";\n  }\n\n  if (WOOD_TASKS.has(normalized)) {\n    return \"wood\";\n  }\n\n  if (GOLD_TASKS.has(normalized)) {\n    return \"gold\";\n  }\n\n  if (STONE_TASKS.has(normalized)) {\n    return \"stone\";\n  }\n\n  if (normalized === \"build\" || normalized === \"forward\") {\n    return \"build\";\n  }\n\n  // Default to food when we cannot determine the resource explicitly\n  return \"food\";\n}\n"],"names":[],"mappings":";;;;;;AAEA,MAAM,aAAa,IAAI,IAAI;IACzB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAED,MAAM,aAAa,IAAI,IAAI;IAAC;IAAQ;IAAiB;IAAU;CAAa;AAC5E,MAAM,aAAa,IAAI,IAAI;IAAC;IAAQ;IAAO;IAAQ;CAAa;AAChE,MAAM,cAAc,IAAI,IAAI;IAAC;CAAQ;AAE9B,MAAM,gBAAqC;IAChD;IACA;IACA;IACA;IACA;CACD;AAEM,SAAS;IACd,OAAO;QACL,MAAM;QACN,MAAM;QACN,MAAM;QACN,OAAO;QACP,OAAO;IACT;AACF;AAEO,SAAS,wBAAwB,IAAa;IACnD,OAAO,CAAC,QAAQ,EAAE,EAAE,WAAW,GAAG,OAAO,CAAC,WAAW;AACvD;AAEO,SAAS,eAAe,IAAa;IAC1C,MAAM,aAAa,wBAAwB;IAE3C,IAAI,WAAW,GAAG,CAAC,aAAa;QAC9B,OAAO;IACT;IAEA,IAAI,WAAW,GAAG,CAAC,aAAa;QAC9B,OAAO;IACT;IAEA,IAAI,WAAW,GAAG,CAAC,aAAa;QAC9B,OAAO;IACT;IAEA,IAAI,YAAY,GAAG,CAAC,aAAa;QAC/B,OAAO;IACT;IAEA,IAAI,eAAe,WAAW,eAAe,WAAW;QACtD,OAAO;IACT;IAEA,mEAAmE;IACnE,OAAO;AACT","debugId":null}},
    {"offset": {"line": 1591, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/lib/buildValidation.ts"],"sourcesContent":["import { BuildOrderStep, Resources } from \"@/types/buildFormat\";\nimport { taskToResource, createEmptyResourceSnapshot } from \"@/lib/taskUtils\";\n\nexport interface BuildValidationError {\n  message: string;\n  stepIndex?: number;\n  severity: \"error\" | \"warning\";\n}\n\nexport interface BuildValidationResult {\n  isValid: boolean;\n  errors: BuildValidationError[];\n}\n\ntype IndexedBuildStep = {\n  step: BuildOrderStep;\n  index: number;\n};\n\nfunction splitIntoAlternativePaths(\n  steps: BuildOrderStep[]\n): IndexedBuildStep[][] {\n  const firstDecisionIndex = steps.findIndex((step) => step.type === \"decision\");\n  const indexedSteps = steps.map((step, index) => ({ step, index }));\n\n  if (firstDecisionIndex === -1) {\n    return [indexedSteps];\n  }\n\n  const commonSteps = indexedSteps.slice(0, firstDecisionIndex);\n  const paths: IndexedBuildStep[][] = [];\n  let currentPath: IndexedBuildStep[] = [];\n\n  for (let i = firstDecisionIndex; i < indexedSteps.length; i++) {\n    const entry = indexedSteps[i];\n    if (entry.step.type === \"decision\") {\n      if (currentPath.length > 0) {\n        paths.push([...commonSteps, ...currentPath]);\n        currentPath = [];\n      }\n      continue;\n    }\n    currentPath.push(entry);\n  }\n\n  if (currentPath.length > 0) {\n    paths.push([...commonSteps, ...currentPath]);\n  }\n\n  if (paths.length === 0) {\n    paths.push([...commonSteps]);\n  }\n\n  return paths;\n}\n\nfunction getAgeDisplayName(age: string): string {\n  switch (age) {\n    case \"feudalAge\":\n      return \"Feudal Age\";\n    case \"castleAge\":\n      return \"Castle Age\";\n    case \"imperialAge\":\n      return \"Imperial Age\";\n    default:\n      return \"Unknown Age\";\n  }\n}\n\nexport function validateBuildOrder(\n  steps: BuildOrderStep[],\n  civilization?: string\n): BuildValidationResult {\n  const errors: BuildValidationError[] = [];\n  const errorSignatures = new Set<string>();\n  const addError = (error: BuildValidationError) => {\n    const signature = `${error.stepIndex ?? -1}|${error.message}`;\n    if (errorSignatures.has(signature)) return;\n    errorSignatures.add(signature);\n    errors.push(error);\n  };\n\n  const alternativePaths = splitIntoAlternativePaths(steps);\n\n  // Check for duplicate technology research within each possible path\n  for (const path of alternativePaths) {\n    const researchedTechs = new Map<string, number>();\n    for (const { step, index } of path) {\n      if (step.type === \"research\" && step.tech) {\n        for (const tech of step.tech) {\n          if (researchedTechs.has(tech)) {\n            const firstIndex = researchedTechs.get(tech)!;\n            addError({\n              message: `Technology \"${tech}\" is researched multiple times in the same path (steps ${\n                firstIndex + 1\n              } and ${index + 1}). Each technology can only be researched once per path.`,\n              stepIndex: index,\n              severity: \"error\",\n            });\n          } else {\n            researchedTechs.set(tech, index);\n          }\n        }\n      }\n    }\n  }\n\n  // Check for empty custom or decision steps\n  for (let i = 0; i < steps.length; i++) {\n    const step = steps[i];\n    if (step.type === \"custom\" || step.type === \"decision\") {\n      if (!step.text || step.text.trim() === \"\") {\n        addError({\n          message: `Step ${i + 1}: Empty custom or decision step.`,\n          stepIndex: i,\n          severity: \"error\",\n        });\n      }\n    }\n  }\n\n  // Check age-related rules within each possible path\n  for (const path of alternativePaths) {\n    const ageUps = new Map<string, number>();\n    const newAgeIndices = new Map<string, number>();\n\n    for (const { step, index } of path) {\n      if (step.type === \"ageUp\") {\n        if (ageUps.has(step.age)) {\n          const firstIndex = ageUps.get(step.age)!;\n          const ageName = getAgeDisplayName(step.age);\n          addError({\n            message: `${ageName} is researched multiple times in the same path (steps ${\n              firstIndex + 1\n            } and ${index + 1}). Each age can only be researched once per path.`,\n            stepIndex: index,\n            severity: \"error\",\n          });\n        } else {\n          ageUps.set(step.age, index);\n        }\n      } else if (step.type === \"newAge\") {\n        newAgeIndices.set(step.age, index);\n      }\n    }\n\n    // Check that newAge comes after ageUp in the same path\n    for (const [age, newAgeIndex] of newAgeIndices) {\n      const ageUpIndex = ageUps.get(age);\n      const ageName = getAgeDisplayName(age);\n      if (ageUpIndex === undefined) {\n        addError({\n          message: `${ageName} reached (step ${\n            newAgeIndex + 1\n          }) without researching it first. You must research an age before reaching it.`,\n          stepIndex: newAgeIndex,\n          severity: \"error\",\n        });\n      } else if (newAgeIndex <= ageUpIndex) {\n        addError({\n          message: `${ageName} reached (step ${\n            newAgeIndex + 1\n          }) before or at the same time as researching it (step ${\n            ageUpIndex + 1\n          }). The age must be researched before it can be reached.`,\n          stepIndex: newAgeIndex,\n          severity: \"error\",\n        });\n      }\n    }\n\n    // Check that Castle Age requires Feudal Age to be reached first in this path\n    if (ageUps.has(\"castleAge\")) {\n      const castleUpIndex = ageUps.get(\"castleAge\")!;\n      const feudalReachedIndex = newAgeIndices.get(\"feudalAge\");\n      if (feudalReachedIndex === undefined) {\n        addError({\n          message: `Castle Age is researched (step ${\n            castleUpIndex + 1\n          }) but Feudal Age was never reached in this path. You must reach Feudal Age before researching Castle Age.`,\n          stepIndex: castleUpIndex,\n          severity: \"error\",\n        });\n      } else if (castleUpIndex <= feudalReachedIndex) {\n        addError({\n          message: `Castle Age is researched (step ${\n            castleUpIndex + 1\n          }) before or at the same time as reaching Feudal Age (step ${\n            feudalReachedIndex + 1\n          }). You must reach Feudal Age before researching Castle Age.`,\n          stepIndex: castleUpIndex,\n          severity: \"error\",\n        });\n      }\n    }\n\n    // Check that Imperial Age requires Castle Age to be reached first in this path\n    if (ageUps.has(\"imperialAge\")) {\n      const imperialUpIndex = ageUps.get(\"imperialAge\")!;\n      const castleReachedIndex = newAgeIndices.get(\"castleAge\");\n      if (castleReachedIndex === undefined) {\n        addError({\n          message: `Imperial Age is researched (step ${\n            imperialUpIndex + 1\n          }) but Castle Age was never reached in this path. You must reach Castle Age before researching Imperial Age.`,\n          stepIndex: imperialUpIndex,\n          severity: \"error\",\n        });\n      } else if (imperialUpIndex <= castleReachedIndex) {\n        addError({\n          message: `Imperial Age is researched (step ${\n            imperialUpIndex + 1\n          }) before or at the same time as reaching Castle Age (step ${\n            castleReachedIndex + 1\n          }). You must reach Castle Age before researching Imperial Age.`,\n          stepIndex: imperialUpIndex,\n          severity: \"error\",\n        });\n      }\n    }\n  }\n\n  // Check for invalid villager movements\n  for (let i = 0; i < steps.length; i++) {\n    const step = steps[i];\n    if (step.type === \"moveVillagers\") {\n      // Check 1: Cannot move villagers from a task to the same task\n      if (step.from === step.to) {\n        addError({\n          message: `Step ${i + 1}: Cannot move villagers from ${step.from} to ${\n            step.to\n          }. The source and destination tasks are the same.`,\n          stepIndex: i,\n          severity: \"error\",\n        });\n        continue; // Skip the second check if this fails\n      }\n\n      // Check 2: Must have enough villagers on the source task\n      // Calculate villager distribution up to this step\n      const villagerDistribution = calculateResourceDistribution(steps, i - 1);\n      const fromResource = taskToResource(step.from);\n      const availableVillagers = villagerDistribution[fromResource] || 0;\n\n      if (availableVillagers < step.count) {\n        addError({\n          message: `Step ${i + 1}: Cannot move ${step.count} villager${\n            step.count > 1 ? \"s\" : \"\"\n          } from ${step.from}. Only ${availableVillagers} villager${\n            availableVillagers !== 1 ? \"s\" : \"\"\n          } available on this task.`,\n          stepIndex: i,\n          severity: \"error\",\n        });\n      }\n    }\n  }\n\n  // Check for civilization-specific building restrictions\n  if (civilization && civilization !== \"Generic\") {\n    for (let i = 0; i < steps.length; i++) {\n      const step = steps[i];\n      const buildings =\n        (step.type === \"newVillagers\" ||\n          step.type === \"moveVillagers\" ||\n          step.type === \"build\") &&\n        step.buildings\n          ? step.buildings\n          : [];\n\n      for (const building of buildings) {\n        const buildingType = building.type;\n\n        // Poles cannot build mills (only folwarks)\n        if (civilization === \"Poles\" && buildingType === \"mill\") {\n          addError({\n            message: `Step ${i + 1}: Poles civilization cannot build mills. Use folwark instead.`,\n            stepIndex: i,\n            severity: \"error\",\n          });\n        }\n\n        // Non-Poles cannot build folwarks\n        if (civilization !== \"Poles\" && buildingType === \"folwark\") {\n          addError({\n            message: `Step ${i + 1}: Only Poles civilization can build folwarks. Use mill instead.`,\n            stepIndex: i,\n            severity: \"error\",\n          });\n        }\n\n        // Armenians and Georgians cannot build lumber camps or mining camps\n        if (\n          (civilization === \"Armenians\" || civilization === \"Georgians\") &&\n          (buildingType === \"lumberCamp\" || buildingType === \"miningCamp\")\n        ) {\n          addError({\n            message: `Step ${i + 1}: ${civilization} civilization cannot build ${\n              buildingType === \"lumberCamp\" ? \"lumber camps\" : \"mining camps\"\n            }. Use mule cart instead.`,\n            stepIndex: i,\n            severity: \"error\",\n          });\n        }\n\n        // Non-Armenians/Georgians cannot build mule carts\n        if (\n          civilization !== \"Armenians\" &&\n          civilization !== \"Georgians\" &&\n          buildingType === \"muleCart\"\n        ) {\n          addError({\n            message: `Step ${i + 1}: Only Armenians and Georgians civilizations can build mule carts. Use lumber camp or mining camp instead.`,\n            stepIndex: i,\n            severity: \"error\",\n          });\n        }\n\n        // Only Hindustanis and Persians can build caravanserai\n        if (\n          civilization !== \"Hindustanis\" &&\n          civilization !== \"Persians\" &&\n          buildingType === \"caravanserai\"\n        ) {\n          addError({\n            message: `Step ${i + 1}: Only Hindustanis and Persians civilizations can build caravanserai.`,\n            stepIndex: i,\n            severity: \"error\",\n          });\n        }\n\n        // Sicilians cannot build watch tower, guard tower, or keep\n        if (\n          civilization === \"Sicilians\" &&\n          (buildingType === \"watchTower\" || buildingType === \"guardTower\" || buildingType === \"keep\")\n        ) {\n          addError({\n            message: `Step ${i + 1}: Sicilians civilization cannot build watch towers, guard towers, or keeps. Use donjon instead.`,\n            stepIndex: i,\n            severity: \"error\",\n          });\n        }\n\n        // Only Sicilians can build donjon\n        if (civilization !== \"Sicilians\" && buildingType === \"donjon\") {\n          addError({\n            message: `Step ${i + 1}: Only Sicilians civilization can build donjons.`,\n            stepIndex: i,\n            severity: \"error\",\n          });\n        }\n\n        // Only Portuguese can build feitoria\n        if (civilization !== \"Portuguese\" && buildingType === \"feitoria\") {\n          addError({\n            message: `Step ${i + 1}: Only Portuguese civilization can build feitorias.`,\n            stepIndex: i,\n            severity: \"error\",\n          });\n        }\n\n        // Only Bulgarians can build krepost\n        if (civilization !== \"Bulgarians\" && buildingType === \"krepost\") {\n          addError({\n            message: `Step ${i + 1}: Only Bulgarians civilization can build kreposts.`,\n            stepIndex: i,\n            severity: \"error\",\n          });\n        }\n\n        // Armenians and Georgians can build fortified church (not monastery)\n        if (\n          (civilization === \"Armenians\" || civilization === \"Georgians\") &&\n          buildingType === \"monastery\"\n        ) {\n          addError({\n            message: `Step ${i + 1}: ${civilization} civilization cannot build monasteries. Use fortified church instead.`,\n            stepIndex: i,\n            severity: \"error\",\n          });\n        }\n\n        // Only Armenians and Georgians can build fortified church\n        if (\n          civilization !== \"Armenians\" &&\n          civilization !== \"Georgians\" &&\n          buildingType === \"fortifiedChurch\"\n        ) {\n          addError({\n            message: `Step ${i + 1}: Only Armenians and Georgians civilizations can build fortified churches. Use monastery instead.`,\n            stepIndex: i,\n            severity: \"error\",\n          });\n        }\n\n        // Only Malay can build harbor\n        if (civilization !== \"Malay\" && buildingType === \"harbor\") {\n          addError({\n            message: `Step ${i + 1}: Only Malay civilization can build harbors.`,\n            stepIndex: i,\n            severity: \"error\",\n          });\n        }\n\n        // Only Khitans can build pasture\n        if (civilization !== \"Khitans\" && buildingType === \"pasture\") {\n          addError({\n            message: `Step ${i + 1}: Only Khitans civilization can build pastures.`,\n            stepIndex: i,\n            severity: \"error\",\n          });\n        }\n      }\n    }\n  }\n\n  // Add more validation rules here as needed\n  // Example: Check for invalid resource counts, missing required fields, etc.\n\n  return {\n    isValid: errors.filter((e) => e.severity === \"error\").length === 0,\n    errors,\n  };\n}\n\n/**\n * Helper function to calculate villager distribution up to a specific step\n * This tracks how many villagers are on each task\n */\nfunction calculateResourceDistribution(\n  steps: BuildOrderStep[],\n  upToStepIndex: number\n): Resources {\n  const distribution = createEmptyResourceSnapshot();\n\n  for (let i = 0; i <= upToStepIndex && i < steps.length; i++) {\n    const step = steps[i];\n\n    if (step.type === \"newVillagers\") {\n      const targetResource = taskToResource(step.task);\n      const count = Math.max(0, Number(step.count) || 0);\n      distribution[targetResource] =\n        (distribution[targetResource] || 0) + count;\n    } else if (step.type === \"moveVillagers\") {\n      const fromResource = taskToResource(step.from);\n      const toResource = taskToResource(step.to);\n      const count = Math.max(0, Number(step.count) || 0);\n\n      distribution[fromResource] = (distribution[fromResource] || 0) - count;\n      distribution[toResource] = (distribution[toResource] || 0) + count;\n    }\n  }\n\n  return distribution;\n}\n\n/**\n * Validates and throws if there are errors\n * Used by the converter to prevent conversion of invalid builds\n */\nexport function validateAndThrow(steps: BuildOrderStep[]): void {\n  const result = validateBuildOrder(steps);\n\n  const errorMessages = result.errors\n    .filter((e) => e.severity === \"error\")\n    .map((e) => e.message);\n\n  if (errorMessages.length > 0) {\n    throw new Error(`Build validation failed:\\n${errorMessages.join(\"\\n\")}`);\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1949, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/lib/database.ts"],"sourcesContent":["import { store, storage } from \"./firebase\";\nimport {\n  doc,\n  getDoc,\n  getDocs,\n  updateDoc,\n  addDoc,\n  setDoc,\n  query,\n  collection,\n  where,\n  deleteDoc,\n  arrayUnion,\n  arrayRemove,\n} from \"firebase/firestore\";\nimport { ref, listAll, getDownloadURL } from \"firebase/storage\";\nimport { Build } from \"@/types/build\";\nimport { BuildOrderStep } from \"@/types/buildFormat\";\nimport { validateBuildOrder } from \"./buildValidation\";\n\nconst DEFAULT_BUILD_STEPS: BuildOrderStep[] = [\n  {\n    count: 6,\n    resources: {\n      gold: 0,\n      stone: 0,\n      build: 0,\n      food: 6,\n      wood: 0,\n    },\n    task: \"sheep\",\n    buildings: [\n      {\n        type: \"house\",\n        count: 2,\n      },\n    ],\n    type: \"newVillagers\",\n  },\n  {\n    type: \"newVillagers\",\n    count: 3,\n    task: \"wood\",\n    resources: {\n      food: 6,\n      stone: 0,\n      gold: 0,\n      build: 0,\n      wood: 3,\n    },\n  },\n  {\n    resources: {\n      food: 7,\n      gold: 0,\n      build: 0,\n      stone: 0,\n      wood: 3,\n    },\n    task: \"boar\",\n    type: \"newVillagers\",\n    count: 1,\n  },\n  {\n    buildings: [\n      {\n        count: 2,\n        type: \"house\",\n      },\n      {\n        count: 1,\n        type: \"mill\",\n      },\n    ],\n    task: \"berries\",\n    type: \"newVillagers\",\n    resources: {\n      build: 0,\n      gold: 0,\n      food: 11,\n      stone: 0,\n      wood: 3,\n    },\n    count: 4,\n  },\n  {\n    animal: \"boar\",\n    type: \"lure\",\n    resources: {\n      build: 0,\n      gold: 0,\n      wood: 3,\n      stone: 0,\n      food: 14,\n    },\n    count: 1,\n  },\n  {\n    task: \"berries\",\n    count: 3,\n    type: \"newVillagers\",\n    resources: {\n      build: 0,\n      food: 14,\n      gold: 0,\n      stone: 0,\n      wood: 6,\n    },\n  },\n  {\n    resources: {\n      build: 0,\n      wood: 6,\n      food: 14,\n      stone: 0,\n      gold: 0,\n    },\n    type: \"research\",\n    tech: [\"loom\"],\n  },\n  {\n    type: \"ageUp\",\n    resources: {\n      build: 0,\n      wood: 6,\n      gold: 0,\n      food: 14,\n      stone: 0,\n    },\n    age: \"feudalAge\",\n  },\n  {\n    resources: {\n      stone: 0,\n      wood: 10,\n      food: 10,\n      gold: 0,\n      build: 0,\n    },\n    to: \"wood\",\n    from: \"sheep\",\n    type: \"moveVillagers\",\n    count: 4,\n    buildings: [\n      {\n        type: \"lumberCamp\",\n        count: 1,\n      },\n    ],\n  },\n  {\n    type: \"build\",\n    buildings: [\n      {\n        count: 1,\n        type: \"barracks\",\n      },\n    ],\n    resources: {\n      wood: 10,\n      build: 0,\n      food: 10,\n      stone: 0,\n      gold: 0,\n    },\n  },\n  {\n    resources: {\n      food: 14,\n      wood: 6,\n      gold: 0,\n      build: 0,\n      stone: 0,\n    },\n    type: \"newAge\",\n    age: \"feudalAge\",\n  },\n  {\n    type: \"research\",\n    tech: [\"doubleBitAxe\", \"horseCollar\"],\n    resources: {\n      wood: 10,\n      build: 0,\n      stone: 0,\n      gold: 0,\n      food: 10,\n    },\n  },\n  {\n    resources: {\n      build: 0,\n      stone: 0,\n      wood: 10,\n      food: 10,\n      gold: 0,\n    },\n    buildings: [\n      {\n        count: 1,\n        type: \"stable\",\n      },\n    ],\n    type: \"build\",\n  },\n  {\n    type: \"trainUnit\",\n    unit: \"scout\",\n    count: 3,\n    resources: {\n      gold: 0,\n      food: 10,\n      build: 0,\n      wood: 10,\n      stone: 0,\n    },\n  },\n];\n\nfunction createDefaultBuildSteps(): BuildOrderStep[] {\n  return DEFAULT_BUILD_STEPS.map((step) =>\n    JSON.parse(JSON.stringify(step))\n  ) as BuildOrderStep[];\n}\n\ninterface User {\n  uid: string;\n}\n\ninterface UserProfile {\n  email: string;\n  favorites: string[];\n  profile_id: string;\n}\n\ninterface Rating {\n  build_id: string;\n  user_id: string;\n  rating: number;\n}\n\nclass DatabaseService {\n\n\n  static async loadAllPublishedBuilds(): Promise<Build[]> {\n    // Query for only builds with status 'published' or 'changed'\n    const q = query(\n      collection(store, \"published-builds\"),\n      where(\"status\", \"in\", [\"published\", \"changed\"])\n    );\n    const querySnapshot = await getDocs(q);\n    const data: Build[] = [];\n    querySnapshot.forEach((doc) => {\n      const build = doc.data() as Build;\n      build.id = doc.id;\n      data.push(build);\n    });\n    console.log(\n      `[DatabaseService] loadAllPublishedBuilds: found ${data.length} builds`\n    );\n    return data;\n  }\n\n  static async loadPublishedBuildWithId(id: string): Promise<Build> {\n    const docRef = doc(store, \"published-builds\", id);\n    const docSnap = await getDoc(docRef);\n\n    if (docSnap.exists()) {\n      const build = docSnap.data() as Build;\n      build.id = docSnap.id;\n      console.log(\n        \"[DatabaseService] loadPublishedBuildWithId: \",\n        JSON.stringify(build, null, 2)\n      );\n      if (build.status === \"published\" || build.status === \"changed\") {\n        return build;\n      } else {\n        throw new Error(`Build with id ${id} is not published`);\n      }\n    } else {\n      throw new Error(`No build with id ${id}`);\n    }\n  }\n\n  static async publishBuildWithId(id: string): Promise<string> {\n    // Load the draft build\n    const draftRef = doc(store, \"builds\", id);\n    const draftSnap = await getDoc(draftRef);\n\n    if (!draftSnap.exists()) {\n      throw new Error(`No draft build with id ${id} found`);\n    }\n\n    const draftBuild = draftSnap.data() as Build;\n\n    // Validate the build before publishing\n    if (draftBuild.build && Array.isArray(draftBuild.build)) {\n      const validationResult = validateBuildOrder(draftBuild.build, draftBuild.civilization);\n      if (!validationResult.isValid) {\n        const errorMessages = validationResult.errors\n          .filter(e => e.severity === \"error\")\n          .map(e => e.message)\n          .join(\"\\n\");\n        throw new Error(`Cannot publish build with validation errors:\\n${errorMessages}`);\n      }\n    }\n\n    // Copy to published-builds collection with published status\n    const publishedRef = doc(store, \"published-builds\", id);\n    await setDoc(publishedRef, {\n      ...draftBuild,\n      status: \"published\",\n    });\n\n    // Update draft status to published\n    await updateDoc(draftRef, { status: \"published\" });\n\n    return id;\n  }\n\n  static async unpublishBuildWithId(id: string): Promise<string> {\n    // Delete from published-builds collection\n    const publishedRef = doc(store, \"published-builds\", id);\n    await deleteDoc(publishedRef).catch((error) => {\n      throw new Error(`Error deleting published build with id ${id}: ${error}`);\n    });\n\n    // Update draft status to draft\n    const draftRef = doc(store, \"builds\", id);\n    await updateDoc(draftRef, { status: \"draft\" }).catch((error) => {\n      throw new Error(`Error updating draft build with id ${id}: ${error}`);\n    });\n\n    return id;\n  }\n\n  static async loadBuilds(userId?: string): Promise<Build[]> {\n    // Load from builds collection (drafts)\n    // If userId is provided, filter by publisher. Otherwise return all builds (admin view).\n    const q =\n      userId !== undefined\n        ? query(collection(store, \"builds\"), where(\"publisher\", \"==\", userId))\n        : query(collection(store, \"builds\"));\n    const querySnapshot = await getDocs(q);\n    const data: Build[] = [];\n    querySnapshot.forEach((doc) => {\n      const build = doc.data() as Build;\n      build.id = doc.id;\n      data.push(build);\n    });\n    return data;\n  }\n\n  static async loadBuildWithId(id: string): Promise<Build> {\n    const docRef = doc(store, \"builds\", id);\n    const docSnap = await getDoc(docRef);\n\n    if (docSnap.exists()) {\n      const build = docSnap.data() as Build;\n      build.id = docSnap.id;\n      console.log(\"Loaded build:\", JSON.stringify(build, null, 2));\n      return build;\n    } else {\n      throw new Error(`No build with id ${id}`);\n    }\n  }\n\n  static async saveBuildWithId(\n    buildId: string,\n    buildData: Partial<Build>\n  ): Promise<void> {\n    // Save to builds collection (draft/working version)\n    const docRef = doc(store, \"builds\", buildId);\n\n    await updateDoc(docRef, buildData).catch((error) => {\n      throw new Error(`Error saving build with id ${buildId}: ${error}`);\n    });\n  }\n\n  static async addNewBuildForPublisher(publisher: string): Promise<string> {\n    const build: Partial<Build> = {\n      title: \"New Build\",\n      civilization: \"Generic\",\n      publisher: publisher,\n      status: \"draft\",\n      build: createDefaultBuildSteps(),\n    };\n    const docRef = await addDoc(collection(store, \"builds\"), build);\n    return docRef.id;\n  }\n\n  static async deleteBuildWithId(id: string): Promise<void> {\n    // Delete from both collections\n    const draftRef = doc(store, \"builds\", id);\n    await deleteDoc(draftRef).catch((error) => {\n      throw new Error(`Error deleting draft build with id ${id}: ${error}`);\n    });\n\n    // Try to delete from published-builds (may not exist)\n    try {\n      const publishedRef = doc(store, \"published-builds\", id);\n      await deleteDoc(publishedRef);\n    } catch {\n      // Ignore error if published version doesn't exist\n    }\n  }\n\n  static async loadPublishedVersionOfBuild(id: string): Promise<Build | null> {\n    try {\n      const docRef = doc(store, \"published-builds\", id);\n      const docSnap = await getDoc(docRef);\n\n      if (docSnap.exists()) {\n        const build = docSnap.data() as Build;\n        build.id = docSnap.id;\n        return build;\n      }\n      return null;\n    } catch {\n      return null;\n    }\n  }\n\n  static async getListOfAllAvailableImages(): Promise<string[]> {\n    const imagesRef = ref(storage, \"Images\");\n    const images: string[] = [];\n\n    await listAll(imagesRef)\n      .then((res) => {\n        res.items.forEach((itemRef) => {\n          images.push(itemRef.name.slice(0, -4));\n        });\n      })\n      .catch((error) => {\n        throw new Error(`Couldn't get all available images: ${error}`);\n      });\n\n    return images;\n  }\n\n  static async getImageURLWithName(name: string): Promise<string> {\n    return await getDownloadURL(ref(storage, `Images/${name}.png`))\n      .then((url) => {\n        return url;\n      })\n      .catch((error) => {\n        throw new Error(\n          `Not able to get URL for image with name: ${name} - Error: ${error}`\n        );\n      });\n  }\n\n  static async loadProfileInfo(user: User): Promise<UserProfile> {\n    const docRef = doc(store, \"users\", user.uid);\n    const docSnap = await getDoc(docRef);\n\n    if (docSnap.exists()) {\n      const userData = docSnap.data() as UserProfile;\n      return userData;\n    } else {\n      throw new Error(`No user with id ${user.uid} found`);\n    }\n  }\n\n  static async saveProfileInfo(\n    user: User,\n    email: string,\n    profileId: string\n  ): Promise<void> {\n    const docRef = doc(store, \"users\", user.uid);\n\n    const userData = { email: email, profile_id: profileId };\n\n    await updateDoc(docRef, userData).catch((error) => {\n      throw new Error(\n        `Error saving profile info for user with id ${user.uid}: ${error}`\n      );\n    });\n  }\n\n  // FAV BUILDS\n  static async favBuildWithIdForUser(id: string, user: User): Promise<void> {\n    const docRef = doc(store, \"users\", user.uid);\n\n    try {\n      await updateDoc(docRef, {\n        favorites: arrayUnion(id),\n      });\n    } catch (error) {\n      // If user document doesn't exist, create it with the favorite\n      const docSnap = await getDoc(docRef);\n      if (!docSnap.exists()) {\n        await setDoc(docRef, {\n          favorites: [id],\n          email: \"\",\n          profile_id: \"\",\n        });\n      } else {\n        throw new Error(`Error favoring build with id ${id}: ${error}`);\n      }\n    }\n  }\n\n  static async removeFavBuildWithIdForUser(\n    id: string,\n    user: User\n  ): Promise<void> {\n    const docRef = doc(store, \"users\", user.uid);\n\n    try {\n      await updateDoc(docRef, {\n        favorites: arrayRemove(id),\n      });\n    } catch (error) {\n      // If user document doesn't exist, create it without the favorite (empty array)\n      const docSnap = await getDoc(docRef);\n      if (!docSnap.exists()) {\n        await setDoc(docRef, {\n          favorites: [],\n          email: \"\",\n          profile_id: \"\",\n        });\n      } else {\n        throw new Error(\n          `Error removing favorite build with id ${id}: ${error}`\n        );\n      }\n    }\n  }\n\n  // RATINGS\n  static async rateBuildWithIdForUser(\n    id: string,\n    user: User,\n    rating: number\n  ): Promise<string> {\n    const docRef = doc(store, \"ratings\", `rating-${id}-${user.uid}`);\n    const data = { build_id: id, user_id: user.uid, rating: rating };\n\n    await setDoc(docRef, data).catch((error) => {\n      throw new Error(`Error rating build with id ${id}: ${error}`);\n    });\n\n    return docRef.id;\n  }\n\n  static async loadUserRatingForBuild(\n    buildId: string,\n    userId: string\n  ): Promise<Rating> {\n    const docRef = doc(store, \"ratings\", `rating-${buildId}-${userId}`);\n    const docSnap = await getDoc(docRef);\n\n    if (docSnap.exists()) {\n      return docSnap.data() as Rating;\n    } else {\n      throw new Error(\n        `No rating for build with id ${buildId} and user ${userId}`\n      );\n    }\n  }\n}\n\nexport default DatabaseService;\n"],"names":[],"mappings":";;;AAAA;AACA;AAAA;AAcA;AAAA;AAGA;;;;;AAEA,MAAM,sBAAwC;IAC5C;QACE,OAAO;QACP,WAAW;YACT,MAAM;YACN,OAAO;YACP,OAAO;YACP,MAAM;YACN,MAAM;QACR;QACA,MAAM;QACN,WAAW;YACT;gBACE,MAAM;gBACN,OAAO;YACT;SACD;QACD,MAAM;IACR;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,WAAW;YACT,MAAM;YACN,OAAO;YACP,MAAM;YACN,OAAO;YACP,MAAM;QACR;IACF;IACA;QACE,WAAW;YACT,MAAM;YACN,MAAM;YACN,OAAO;YACP,OAAO;YACP,MAAM;QACR;QACA,MAAM;QACN,MAAM;QACN,OAAO;IACT;IACA;QACE,WAAW;YACT;gBACE,OAAO;gBACP,MAAM;YACR;YACA;gBACE,OAAO;gBACP,MAAM;YACR;SACD;QACD,MAAM;QACN,MAAM;QACN,WAAW;YACT,OAAO;YACP,MAAM;YACN,MAAM;YACN,OAAO;YACP,MAAM;QACR;QACA,OAAO;IACT;IACA;QACE,QAAQ;QACR,MAAM;QACN,WAAW;YACT,OAAO;YACP,MAAM;YACN,MAAM;YACN,OAAO;YACP,MAAM;QACR;QACA,OAAO;IACT;IACA;QACE,MAAM;QACN,OAAO;QACP,MAAM;QACN,WAAW;YACT,OAAO;YACP,MAAM;YACN,MAAM;YACN,OAAO;YACP,MAAM;QACR;IACF;IACA;QACE,WAAW;YACT,OAAO;YACP,MAAM;YACN,MAAM;YACN,OAAO;YACP,MAAM;QACR;QACA,MAAM;QACN,MAAM;YAAC;SAAO;IAChB;IACA;QACE,MAAM;QACN,WAAW;YACT,OAAO;YACP,MAAM;YACN,MAAM;YACN,MAAM;YACN,OAAO;QACT;QACA,KAAK;IACP;IACA;QACE,WAAW;YACT,OAAO;YACP,MAAM;YACN,MAAM;YACN,MAAM;YACN,OAAO;QACT;QACA,IAAI;QACJ,MAAM;QACN,MAAM;QACN,OAAO;QACP,WAAW;YACT;gBACE,MAAM;gBACN,OAAO;YACT;SACD;IACH;IACA;QACE,MAAM;QACN,WAAW;Y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","debugId":null}},
    {"offset": {"line": 2427, "column": 0}, "map": {"version":3,"sources":["file:///Users/johannesberger/Developer/buildorderguide/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport Navigation from \"@/components/Navigation\";\nimport VillagerCounts from \"@/components/VillagerCounts\";\nimport Rating from \"@/components/Rating\";\nimport Input from \"@/components/Input\";\nimport Dropdown from \"@/components/Dropdown\";\nimport CivIcon from \"@/components/CivIcon\";\nimport DifficultyBadge from \"@/components/DifficultyBadge\";\nimport AttributeBadges from \"@/components/AttributeBadges\";\nimport FavoriteButton from \"@/components/FavoriteButton\";\nimport BuildImageComponent from \"@/components/BuildImage\";\nimport LoadingSpinner from \"@/components/LoadingSpinner\";\nimport EmptyState from \"@/components/EmptyState\";\nimport Header from \"@/components/Header\";\nimport AuthPromptModal from \"@/components/AuthPromptModal\";\nimport DatabaseService from \"@/lib/database\";\nimport { Build } from \"@/types/build\";\nimport { useRouter } from \"next/navigation\";\nimport civData from \"@/data/civData.json\";\nimport { getAttributeDropdownOptions } from \"@/lib/attributes\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport Image from \"next/image\";\nimport {\n  getFeudalVillagerCount,\n  getVillagerDifference,\n} from \"@/lib/villagerCalculator\";\nimport {\n  getCivImagePath,\n  getDifficultyImagePath,\n  getDifficultyLabel,\n} from \"@/lib/imageUtils\";\n\ninterface BuildCardProps {\n  build: Build;\n  onBuildClick: (buildId: string) => void;\n  isFavorited: boolean;\n  onToggleFavorite: (buildId: string) => void;\n}\n\ntype SortColumn = \"title\" | \"rating\" | \"pop\" | \"difficulty\" | \"civilization\";\n\nconst difficultyOrder: Record<string, number> = {\n  beginner: 1,\n  intermediate: 2,\n  advanced: 3,\n};\n\nconst coerceNumber = (value: unknown): number | null => {\n  if (typeof value === \"number\" && Number.isFinite(value)) {\n    return value;\n  }\n  if (typeof value === \"string\") {\n    const parsed = parseInt(value, 10);\n    if (!Number.isNaN(parsed)) {\n      return parsed;\n    }\n  }\n  return null;\n};\n\nconst extractPopValue = (build: Build, keys: string[]): number | null => {\n  if (!build.pop) {\n    return null;\n  }\n\n  for (const key of keys) {\n    const candidate = coerceNumber((build.pop as Record<string, unknown>)[key]);\n    if (candidate !== null) {\n      return candidate;\n    }\n  }\n\n  return null;\n};\n\nconst formatFeudalDisplay = (build: Build): string => {\n  return getFeudalVillagerCount(build);\n};\n\nconst parseFeudalSortValue = (build: Build): number => {\n  const display = formatFeudalDisplay(build);\n  const parsed = parseInt(display, 10);\n  return Number.isNaN(parsed) ? Number.POSITIVE_INFINITY : parsed;\n};\n\nconst formatVillagerDiffDisplay = (\n  build: Build,\n  age: \"castle\" | \"imperial\"\n): string => {\n  const diff = getVillagerDifference(build, age);\n  if (diff) {\n    return diff;\n  }\n\n  const fallback = extractPopValue(\n    build,\n    age === \"castle\"\n      ? [\"castle\", \"Castle\", \"castleAge\", \"castle_age\"]\n      : [\"imperial\", \"Imperial\", \"imperialAge\", \"imperial_age\"]\n  );\n\n  if (fallback !== null) {\n    const sign = fallback > 0 ? \"+\" : \"\";\n    return `${sign}${fallback}`;\n  }\n\n  return \"\";\n};\n\nconst parseVillagerDiffSortValue = (\n  build: Build,\n  age: \"castle\" | \"imperial\"\n): number => {\n  const display = formatVillagerDiffDisplay(build, age);\n  const parsed = parseInt(display.replace(\"+\", \"\"), 10);\n  return Number.isNaN(parsed) ? Number.POSITIVE_INFINITY : parsed;\n};\n\nconst getPopSortValue = (build: Build): number => {\n  const base = parseFeudalSortValue(build);\n  if (!Number.isFinite(base)) {\n    return Number.POSITIVE_INFINITY;\n  }\n\n  const castle = parseVillagerDiffSortValue(build, \"castle\");\n  const imperial = parseVillagerDiffSortValue(build, \"imperial\");\n\n  const safeCastle = Number.isFinite(castle) ? castle : 0;\n  const safeImperial = Number.isFinite(imperial) ? imperial : 0;\n\n  return base + safeCastle + safeImperial;\n};\n\nconst formatPopSummary = (build: Build): string => {\n  const feudal = formatFeudalDisplay(build);\n  if (feudal === \"\") {\n    return \"\";\n  }\n\n  const parts = [feudal];\n  const castle = formatVillagerDiffDisplay(build, \"castle\");\n  if (castle !== \"\" && castle !== \"+0\" && castle !== \"0\") {\n    parts.push(castle);\n  }\n  const imperial = formatVillagerDiffDisplay(build, \"imperial\");\n  if (imperial !== \"\" && imperial !== \"+0\" && imperial !== \"0\") {\n    parts.push(imperial);\n  }\n\n  return parts.join(\" \");\n};\n\nconst getDifficultySortValue = (build: Build): number => {\n  const value = build.difficulty;\n\n  if (typeof value === \"number\") {\n    return value;\n  }\n  if (typeof value === \"string\") {\n    const numeric = parseInt(value, 10);\n    if (!Number.isNaN(numeric)) {\n      return numeric;\n    }\n\n    const normalized = value.trim().toLowerCase();\n    if (normalized in difficultyOrder) {\n      return difficultyOrder[normalized];\n    }\n  }\n\n  return Number.POSITIVE_INFINITY;\n};\n\nconst getSortMetric = (build: Build, column: SortColumn): number | string => {\n  switch (column) {\n    case \"title\":\n      return build.title.toLowerCase();\n    case \"rating\":\n      return build.avg_rating ?? build.rating ?? Number.NEGATIVE_INFINITY;\n    case \"pop\":\n      return getPopSortValue(build);\n    case \"difficulty\":\n      return getDifficultySortValue(build);\n    case \"civilization\":\n      return build.civilization.toLowerCase();\n    default:\n      return build.title.toLowerCase();\n  }\n};\n\nconst TooltipIcon = ({\n  children,\n  tooltip,\n  ariaLabel,\n}: {\n  children: React.ReactNode;\n  tooltip: React.ReactNode;\n  ariaLabel: string;\n}) => {\n  const [isHovered, setIsHovered] = React.useState(false);\n  const [position, setPosition] = React.useState({ top: 0, left: 0 });\n  const triggerRef = React.useRef<HTMLDivElement>(null);\n\n  const updatePosition = () => {\n    if (triggerRef.current) {\n      const rect = triggerRef.current.getBoundingClientRect();\n      setPosition({\n        top: rect.bottom + 8,\n        left: rect.left + rect.width / 2,\n      });\n    }\n  };\n\n  const handleMouseEnter = () => {\n    updatePosition();\n    setIsHovered(true);\n  };\n\n  const handleMouseLeave = () => {\n    setIsHovered(false);\n  };\n\n  const handleFocus = () => {\n    updatePosition();\n    setIsHovered(true);\n  };\n\n  const handleBlur = () => {\n    setIsHovered(false);\n  };\n\n  return (\n    <>\n      <div\n        ref={triggerRef}\n        className=\"relative inline-flex items-center justify-center\"\n        tabIndex={0}\n        aria-label={ariaLabel}\n        onMouseEnter={handleMouseEnter}\n        onMouseLeave={handleMouseLeave}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n      >\n        {children}\n      </div>\n      {isHovered && (\n        <div\n          className=\"pointer-events-none fixed z-50\"\n          style={{\n            top: `${position.top}px`,\n            left: `${position.left}px`,\n            transform: \"translateX(-50%)\",\n          }}\n        >\n          <div className=\"w-max rounded-default border border-foreground/10 bg-background px-3 py-2 text-xs text-foreground shadow-hover\">\n            <div className=\"flex items-center justify-center gap-2 whitespace-nowrap\">\n              {tooltip}\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default function Home() {\n  const [builds, setBuilds] = useState<Build[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedCiv, setSelectedCiv] = useState(\"All\");\n  const [selectedType, setSelectedType] = useState(\"All\");\n  const [selectedDisplay, setSelectedDisplay] = useState(\"All\");\n  const [favorites, setFavorites] = useState<string[]>([]);\n  const [viewMode, setViewMode] = useState<\"cards\" | \"table\">(\"cards\");\n  const [sortConfig, setSortConfig] = useState<{\n    column: SortColumn;\n    direction: \"asc\" | \"desc\";\n  }>({\n    column: \"title\",\n    direction: \"asc\",\n  });\n  const [isAuthPromptOpen, setIsAuthPromptOpen] = useState(false);\n  const router = useRouter();\n  const { currentUser } = useAuth();\n\n  const civilizations = civData.civilizations;\n  const civOptions = [\n    { value: \"All\", icon: \"/images/Civs/generic.png\" },\n    ...civilizations.map((civ: { name: string }) => ({\n      value: civ.name,\n      icon: `/images/Civs/${civ.name.toLowerCase()}.png`,\n    })),\n  ];\n\n  const availableAttributes = getAttributeDropdownOptions();\n\n  const displayOptions = [{ value: \"All\" }, { value: \"Favorites\" }];\n\n  const filteredBuilds = React.useMemo(() => {\n    const filtered = builds.filter((build) => {\n      // Search filter\n      const matchesSearch =\n        searchQuery === \"\" ||\n        build.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        (build.author &&\n          build.author.toLowerCase().includes(searchQuery.toLowerCase()));\n\n      // Civilization filter\n      const matchesCiv =\n        selectedCiv === \"All\" || build.civilization === selectedCiv;\n\n      // Type/Attribute filter\n      const matchesType =\n        selectedType === \"All\" ||\n        (build.attributes && build.attributes.includes(selectedType));\n\n      // Display filter (All vs Favorites)\n      const matchesDisplay =\n        selectedDisplay === \"All\" ||\n        (selectedDisplay === \"Favorites\" && favorites.includes(build.id));\n\n      return matchesSearch && matchesCiv && matchesType && matchesDisplay;\n    });\n\n    filtered.sort((a, b) => {\n      const valueA = getSortMetric(a, sortConfig.column);\n      const valueB = getSortMetric(b, sortConfig.column);\n\n      let comparison: number;\n\n      if (typeof valueA === \"string\" && typeof valueB === \"string\") {\n        comparison = valueA.localeCompare(valueB);\n      } else if (typeof valueA === \"number\" && typeof valueB === \"number\") {\n        comparison = valueA - valueB;\n      } else {\n        comparison = valueA.toString().localeCompare(valueB.toString());\n      }\n\n      if (comparison === 0) {\n        comparison = a.title.localeCompare(b.title);\n      }\n\n      return sortConfig.direction === \"asc\" ? comparison : -comparison;\n    });\n\n    return filtered;\n  }, [\n    builds,\n    searchQuery,\n    selectedCiv,\n    selectedType,\n    selectedDisplay,\n    favorites,\n    sortConfig,\n  ]);\n\n  const loadAllBuilds = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const allBuilds = await DatabaseService.loadAllPublishedBuilds();\n      setBuilds(allBuilds);\n    } catch {\n      setError(\"Failed to load builds\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadUserFavorites = useCallback(async () => {\n    if (!currentUser) return;\n    try {\n      const userProfile = await DatabaseService.loadProfileInfo({\n        uid: currentUser.uid,\n      });\n      if (userProfile.favorites) {\n        setFavorites(userProfile.favorites);\n      } else {\n        setFavorites([]);\n      }\n    } catch (error) {\n      console.error(\"Failed to load user favorites:\", error);\n      // User profile doesn't exist yet - this is normal for new users\n      setFavorites([]);\n    }\n  }, [currentUser]);\n\n  useEffect(() => {\n    loadAllBuilds();\n  }, []);\n\n  useEffect(() => {\n    if (currentUser) {\n      loadUserFavorites();\n    } else {\n      setFavorites([]);\n    }\n  }, [currentUser, loadUserFavorites]);\n\n\n\n  const handleBuildClick = (buildId: string) => {\n    router.push(`/builds/${buildId}`);\n  };\n\n  const toggleFavorite = async (buildId: string) => {\n    if (!currentUser) {\n      setIsAuthPromptOpen(true);\n      return;\n    }\n\n    try {\n      const isFavorited = favorites.includes(buildId);\n\n      if (isFavorited) {\n        // Remove from favorites\n        setFavorites(favorites.filter((id) => id !== buildId));\n        await DatabaseService.removeFavBuildWithIdForUser(buildId, {\n          uid: currentUser.uid,\n        });\n      } else {\n        // Add to favorites\n        setFavorites([...favorites, buildId]);\n        await DatabaseService.favBuildWithIdForUser(buildId, {\n          uid: currentUser.uid,\n        });\n      }\n    } catch (error) {\n      console.error(\"Failed to toggle favorite:\", error);\n      // Show user-friendly error message\n      alert(\"Failed to update favorites. Please try again.\");\n      // Revert the local state change on error\n      await loadUserFavorites();\n    }\n  };\n\n  const handleSort = (column: SortColumn) => {\n    setSortConfig((prev) => {\n      if (prev.column === column) {\n        return {\n          column,\n          direction: prev.direction === \"asc\" ? \"desc\" : \"asc\",\n        };\n      }\n      return {\n        column,\n        direction: \"asc\",\n      };\n    });\n  };\n\n  const renderSortIndicator = (column: SortColumn) => {\n    if (sortConfig.column !== column) {\n      return (\n        <span className=\"text-xs text-foreground/60\" aria-hidden=\"true\">\n          \n        </span>\n      );\n    }\n    return (\n      <span className=\"text-xs text-foreground\" aria-hidden=\"true\">\n        {sortConfig.direction === \"asc\" ? \"\" : \"\"}\n      </span>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <Navigation />\n      <main className=\"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8\">\n        <div className=\"px-4 py-6 sm:px-0\">\n          {error && (\n            <div className=\"bg-cancel border border-cancel rounded-default p-4 mb-6\">\n              <p className=\"text-cancel\">{error}</p>\n            </div>\n          )}\n\n          {/* Page Header */}\n          <Header\n            text=\"Build Order Guide\"\n            subtitle=\"Discover and explore build orders for Age of Empires II\"\n          />\n\n          {loading ? (\n            <div className=\"text-center py-12\">\n              <LoadingSpinner label=\"Loading builds...\" />\n            </div>\n          ) : (\n            <>\n              {/* Search and Filter Controls */}\n              <div className=\"mb-8\">\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-2 md:gap-4 mb-4\">\n                  <Dropdown\n                    value={selectedCiv}\n                    onChange={setSelectedCiv}\n                    options={civOptions}\n                    label=\"Civ\"\n                  />\n\n                  <Dropdown\n                    value={selectedType}\n                    onChange={setSelectedType}\n                    options={availableAttributes}\n                    label=\"Type\"\n                  />\n\n                  <Dropdown\n                    value={selectedDisplay}\n                    onChange={setSelectedDisplay}\n                    options={displayOptions}\n                    label=\"Display\"\n                  />\n                </div>\n\n                {/* Search Input - Second Row */}\n                <div>\n                  <Input\n                    value={searchQuery}\n                    onChange={(value) => setSearchQuery(value as string)}\n                    placeholder=\"Search builds\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end mb-6\">\n                <div className=\"inline-flex rounded-default border border-foreground/20 overflow-hidden\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setViewMode(\"cards\")}\n                    className={`px-3 py-1 text-sm font-medium transition-colors ${viewMode === \"cards\"\n                      ? \"bg-foreground text-background\"\n                      : \"bg-background text-foreground hover:bg-muted\"\n                      }`}\n                  >\n                    Cards\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => setViewMode(\"table\")}\n                    className={`px-3 py-1 text-sm font-medium transition-colors border-l border-foreground/20 ${viewMode === \"table\"\n                      ? \"bg-foreground text-background\"\n                      : \"bg-background text-foreground hover:bg-muted\"\n                      }`}\n                  >\n                    Table\n                  </button>\n                </div>\n              </div>\n\n              {filteredBuilds.length === 0 ? (\n                <EmptyState text=\"No builds found matching your criteria\" />\n              ) : (\n                <>\n                  {viewMode === \"cards\" ? (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                      {filteredBuilds.map((build) => (\n                        <BuildCard\n                          key={build.id}\n                          build={build}\n                          onBuildClick={handleBuildClick}\n                          isFavorited={favorites.includes(build.id)}\n                          onToggleFavorite={toggleFavorite}\n                        />\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"overflow-x-auto rounded-default shadow-default\">\n                      <table className=\"min-w-full divide-y divide-foreground/10\">\n                        <thead className=\"bg-muted\">\n                          <tr>\n                            <th className=\"px-4 py-3 text-center text-sm font-semibold text-foreground cursor-pointer\" onClick={() => handleSort(\"civilization\")}>\n                              <div className=\"inline-flex items-center gap-2 hover:text-primary transition-colors\">\n                                Civ\n                                {renderSortIndicator(\"civilization\")}\n                              </div>\n                            </th>\n                            <th className=\"px-4 py-3 text-left text-sm font-semibold text-foreground cursor-pointer\" onClick={() => handleSort(\"title\")}>\n                              <div className=\"flex items-center gap-2 hover:text-primary transition-colors\">\n                                Title\n                                {renderSortIndicator(\"title\")}\n                              </div>\n                            </th>\n                            <th className=\"px-4 py-3 text-center text-sm font-semibold text-foreground cursor-pointer\" onClick={() => handleSort(\"pop\")}>\n                              <div className=\"inline-flex items-center gap-2 hover:text-primary transition-colors\">\n                                Population\n                                {renderSortIndicator(\"pop\")}\n                              </div>\n                            </th>\n                            <th className=\"px-4 py-3 text-left text-sm font-semibold text-foreground cursor-pointer\" onClick={() => handleSort(\"difficulty\")}>\n                              <div className=\"flex items-center gap-2 hover:text-primary transition-colors\">\n                                Difficulty\n                                {renderSortIndicator(\"difficulty\")}\n                              </div>\n                            </th>\n                            <th className=\"px-4 py-3 text-center text-sm font-semibold text-foreground cursor-pointer\" onClick={() => handleSort(\"rating\")}>\n                              <div className=\"inline-flex items-center gap-2 hover:text-primary transition-colors\">\n                                Rating\n                                {renderSortIndicator(\"rating\")}\n                              </div>\n                            </th>\n                            <th className=\"px-4 py-3 text-right text-sm font-semibold text-foreground\">\n                              Favorite\n                            </th>\n                          </tr>\n                        </thead>\n                        <tbody className=\"divide-y divide-foreground/10 bg-background\">\n                          {filteredBuilds.map((build) => {\n                            const isFavorited = favorites.includes(build.id);\n                            const ratingValue =\n                              build.avg_rating ?? build.rating ?? 0;\n                            const ratingCount =\n                              build.number_of_ratings ?? build.ratingCount ?? 0;\n                            const popSummary = formatPopSummary(build);\n                            const civName = build.civilization;\n                            const civImagePath = getCivImagePath(\n                              civName === \"Generic\" ? \"generic\" : civName\n                            );\n                            const difficultyValue = build.difficulty;\n                            const difficultyLabel =\n                              difficultyValue || difficultyValue === 0\n                                ? getDifficultyLabel(difficultyValue)\n                                : null;\n                            const difficultyImage = difficultyLabel\n                              ? getDifficultyImagePath(\n                                difficultyValue as string | number\n                              )\n                              : null;\n\n                            return (\n                              <tr\n                                key={build.id}\n                                onClick={() => handleBuildClick(build.id)}\n                                className=\"hover:bg-muted/40 cursor-pointer transition-all duration-300\"\n                              >\n                                <td className=\"px-4 py-3 text-center\">\n                                  <TooltipIcon\n                                    ariaLabel={`${civName} civilization`}\n                                    tooltip={\n                                      <>\n                                        <Image\n                                          src={civImagePath}\n                                          alt={civName}\n                                          width={24}\n                                          height={24}\n                                        />\n                                        <span className=\"font-medium\">\n                                          {civName}\n                                        </span>\n                                      </>\n                                    }\n                                  >\n                                    <Image\n                                      src={civImagePath}\n                                      alt={civName}\n                                      width={24}\n                                      height={24}\n                                    />\n                                  </TooltipIcon>\n                                </td>\n                                <td className=\"px-4 py-3\">\n                                  <div className=\"flex flex-col\">\n                                    <span className=\"font-semibold text-foreground\">\n                                      {build.title}\n                                    </span>\n                                    <span className=\"text-xs text-foreground/70\">\n                                      {build.author || \"??\"}\n                                    </span>\n                                  </div>\n                                </td>\n                                <td className=\"px-4 py-3 text-center text-sm text-foreground\">\n                                  {popSummary}\n                                </td>\n                                <td className=\"px-4 py-3 text-center\">\n                                  {difficultyLabel && difficultyImage ? (\n                                    <TooltipIcon\n                                      ariaLabel={`${difficultyLabel} difficulty`}\n                                      tooltip={\n                                        <>\n                                          <Image\n                                            src={difficultyImage}\n                                            alt={`${difficultyLabel} difficulty`}\n                                            width={24}\n                                            height={24}\n                                          />\n                                          <span className=\"font-medium\">\n                                            {difficultyLabel}\n                                          </span>\n                                        </>\n                                      }\n                                    >\n                                      <Image\n                                        src={difficultyImage}\n                                        alt={`${difficultyLabel} difficulty`}\n                                        width={24}\n                                        height={24}\n                                      />\n                                    </TooltipIcon>\n                                  ) : (\n                                    <span className=\"text-sm text-foreground/60\">\n                                      \n                                    </span>\n                                  )}\n                                </td>\n                                <td className=\"px-4 py-3 text-center\">\n                                  <TooltipIcon\n                                    ariaLabel={`Rating: ${ratingValue} stars, ${ratingCount} review${ratingCount === 1 ? \"\" : \"s\"}`}\n                                    tooltip={\n                                      <div className=\"flex flex-col items-center gap-1\">\n                                        <Rating\n                                          rating={ratingValue}\n                                          size=\"small\"\n                                        />\n                                        <span className=\"text-foreground/80\">\n                                          {ratingCount > 0\n                                            ? `${ratingCount} review${ratingCount === 1 ? \"\" : \"s\"\n                                            }`\n                                            : \"No reviews\"}\n                                        </span>\n                                      </div>\n                                    }\n                                  >\n                                    <Rating\n                                      rating={ratingValue}\n                                      size=\"small\"\n                                    />\n                                  </TooltipIcon>\n                                </td>\n                                <td className=\"px-4 py-3 text-right\">\n                                  <FavoriteButton\n                                    isFavorited={isFavorited}\n                                    onToggle={(e) => {\n                                      e?.stopPropagation();\n                                      toggleFavorite(build.id);\n                                    }}\n                                  />\n                                </td>\n                              </tr>\n                            );\n                          })}\n                        </tbody>\n                      </table>\n                    </div>\n                  )}\n                </>\n              )}\n            </>\n          )}\n        </div>\n      </main>\n\n      <AuthPromptModal\n        isOpen={isAuthPromptOpen}\n        onClose={() => setIsAuthPromptOpen(false)}\n        onLogin={() => router.push(\"/login\")}\n        onRegister={() => router.push(\"/register\")}\n      />\n    </div>\n  );\n}\n\nfunction BuildCard({\n  build,\n  onBuildClick,\n  isFavorited,\n  onToggleFavorite,\n}: BuildCardProps) {\n  return (\n    <div\n      onClick={() => onBuildClick(build.id)}\n      className=\"bg-background rounded-default shadow-default hover:shadow-hover hover:scale-[1.01] transition-all duration-300 overflow-hidden cursor-pointer h-80 flex flex-col\"\n    >\n      {/* Top Section - Full Width with Civ, Title, Author, Heart */}\n      <div className=\"p-5 pb-0\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <CivIcon civilization={build.civilization} showName={true} />\n          <FavoriteButton\n            isFavorited={isFavorited}\n            onToggle={() => onToggleFavorite(build.id)}\n          />\n        </div>\n\n        {/* Build Title */}\n        <h3 className=\"text-xl font-bold text-foreground uppercase tracking-wide text-pretty mb-2\">\n          {build.title}\n        </h3>\n\n        {/* Author */}\n        <p className=\"text-sm text-foreground mb-4\">{build.author || \"??\"}</p>\n      </div>\n\n      {/* Bottom Section - Two Columns */}\n      <div className=\"flex flex-1\">\n        {/* Left Column - Build Image */}\n        <div className=\"flex-shrink-0 flex flex-col justify-end\">\n          <BuildImageComponent\n            imageURL={build.imageURL}\n            buildTitle={build.title}\n          />\n        </div>\n\n        {/* Right Column - Stats and Info */}\n        <div className=\"flex-1 flex flex-col p-4 justify-between\">\n          {/* Top Content - All badge rows */}\n          <div className=\"flex-1\">\n            {/* Villager Counts Row */}\n            <VillagerCounts build={build} />\n\n            {/* Attributes Row */}\n            <div className=\"flex items-center flex-wrap gap-2 mb-2\">\n              <AttributeBadges\n                attributes={build.attributes || []}\n                maxVisible={2}\n              />\n            </div>\n\n            {/* Difficulty Row */}\n            {build.difficulty && (\n              <div className=\"flex items-center flex-wrap gap-2 mb-2\">\n                <DifficultyBadge difficulty={build.difficulty} />\n              </div>\n            )}\n          </div>\n\n          {/* Bottom Row - Rating aligned to the right */}\n          <div className=\"flex justify-end\">\n            <Rating\n              rating={build.avg_rating}\n              size=\"small\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}